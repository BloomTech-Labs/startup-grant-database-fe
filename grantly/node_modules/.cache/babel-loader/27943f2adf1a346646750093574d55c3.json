{"ast":null,"code":"/**\n * auth0-js v9.12.2\n * Author: Auth0\n * Date: 2020-01-14\n * License: MIT\n */\n!function (global, factory) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = factory() : \"function\" == typeof define && define.amd ? define(factory) : (global = global || self).CordovaAuth0Plugin = factory();\n}(this, function () {\n  \"use strict\";\n\n  var version = {\n    raw: \"9.12.2\"\n  },\n      toString = Object.prototype.toString;\n\n  function attribute(o, attr, type, text) {\n    if (type = \"array\" === type ? \"object\" : type, o && typeof o[attr] !== type) throw new Error(text);\n  }\n\n  function variable(o, type, text) {\n    if (typeof o !== type) throw new Error(text);\n  }\n\n  function value(o, values, text) {\n    if (-1 === values.indexOf(o)) throw new Error(text);\n  }\n\n  var assert = {\n    check: function (o, config, attributes) {\n      if (config.optional && !o || variable(o, config.type, config.message), \"object\" === config.type && attributes) for (var keys = Object.keys(attributes), index = 0; index < keys.length; index++) {\n        var a = keys[index];\n        attributes[a].optional && !o[a] || attributes[a].condition && !attributes[a].condition(o) || (attribute(o, a, attributes[a].type, attributes[a].message), attributes[a].values && value(o[a], attributes[a].values, attributes[a].value_message));\n      }\n    },\n    attribute: attribute,\n    variable: variable,\n    value: value,\n    isArray: function (array) {\n      return this.supportsIsArray() ? Array.isArray(array) : \"[object Array]\" === toString.call(array);\n    },\n    supportsIsArray: function () {\n      return null != Array.isArray;\n    }\n  };\n\n  function objectAssignPolyfill(target) {\n    if (null == target) throw new TypeError(\"Cannot convert first argument to object\");\n\n    for (var to = Object(target), i = 1; i < arguments.length; i++) {\n      var nextSource = arguments[i];\n      if (null != nextSource) for (var keysArray = Object.keys(Object(nextSource)), nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\n        var nextKey = keysArray[nextIndex],\n            desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n        void 0 !== desc && desc.enumerable && (to[nextKey] = nextSource[nextKey]);\n      }\n    }\n\n    return to;\n  }\n\n  var objectAssign = {\n    get: function () {\n      return Object.assign ? Object.assign : objectAssignPolyfill;\n    },\n    objectAssignPolyfill: objectAssignPolyfill\n  };\n\n  function pick(object, keys) {\n    return keys.reduce(function (prev, key) {\n      return object[key] && (prev[key] = object[key]), prev;\n    }, {});\n  }\n\n  function extend() {\n    var params = function (obj) {\n      var values = [];\n\n      for (var key in obj) values.push(obj[key]);\n\n      return values;\n    }(arguments);\n\n    return params.unshift({}), objectAssign.get().apply(void 0, params);\n  }\n\n  function getLocationFromUrl(href) {\n    var match = href.match(/^(https?:|file:|chrome-extension:)\\/\\/(([^:\\/?#]*)(?::([0-9]+))?)([\\/]{0,1}[^?#]*)(\\?[^#]*|)(#.*|)$/);\n    return match && {\n      href: href,\n      protocol: match[1],\n      host: match[2],\n      hostname: match[3],\n      port: match[4],\n      pathname: match[5],\n      search: match[6],\n      hash: match[7]\n    };\n  }\n\n  function trim(options, key) {\n    var trimmed = extend(options);\n    return options[key] && (trimmed[key] = options[key].trim()), trimmed;\n  }\n\n  var objectHelper = {\n    toSnakeCase: function toSnakeCase(object, exceptions) {\n      return \"object\" != typeof object || assert.isArray(object) || null === object ? object : (exceptions = exceptions || [], Object.keys(object).reduce(function (p, key) {\n        return p[-1 === exceptions.indexOf(key) ? function (str) {\n          for (var code, newKey = \"\", index = 0, wasPrevNumber = !0, wasPrevUppercase = !0; index < str.length;) code = str.charCodeAt(index), !wasPrevUppercase && code >= 65 && code <= 90 || !wasPrevNumber && code >= 48 && code <= 57 ? (newKey += \"_\", newKey += str[index].toLowerCase()) : newKey += str[index].toLowerCase(), wasPrevNumber = code >= 48 && code <= 57, wasPrevUppercase = code >= 65 && code <= 90, index++;\n\n          return newKey;\n        }(key) : key] = toSnakeCase(object[key]), p;\n      }, {}));\n    },\n    toCamelCase: function toCamelCase(object, exceptions, options) {\n      return \"object\" != typeof object || assert.isArray(object) || null === object ? object : (exceptions = exceptions || [], options = options || {}, Object.keys(object).reduce(function (p, key) {\n        var parts,\n            newKey = -1 === exceptions.indexOf(key) ? (parts = key.split(\"_\")).reduce(function (p, c) {\n          return p + c.charAt(0).toUpperCase() + c.slice(1);\n        }, parts.shift()) : key;\n        return p[newKey] = toCamelCase(object[newKey] || object[key], [], options), options.keepOriginal && (p[key] = toCamelCase(object[key], [], options)), p;\n      }, {}));\n    },\n    blacklist: function (object, blacklistedKeys) {\n      return Object.keys(object).reduce(function (p, key) {\n        return -1 === blacklistedKeys.indexOf(key) && (p[key] = object[key]), p;\n      }, {});\n    },\n    merge: function (object, keys) {\n      return {\n        base: keys ? pick(object, keys) : object,\n        with: function (object2, keys2) {\n          return object2 = keys2 ? pick(object2, keys2) : object2, extend(this.base, object2);\n        }\n      };\n    },\n    pick: pick,\n    getKeysNotIn: function (obj, allowedKeys) {\n      var notAllowed = [];\n\n      for (var key in obj) -1 === allowedKeys.indexOf(key) && notAllowed.push(key);\n\n      return notAllowed;\n    },\n    extend: extend,\n    getOriginFromUrl: function (url) {\n      if (url) {\n        var parsed = getLocationFromUrl(url),\n            origin = parsed.protocol + \"//\" + parsed.hostname;\n        return parsed.port && (origin += \":\" + parsed.port), origin;\n      }\n    },\n    getLocationFromUrl: getLocationFromUrl,\n    trimUserDetails: function (options) {\n      return function (options, keys) {\n        return keys.reduce(trim, options);\n      }(options, [\"username\", \"email\", \"phoneNumber\"]);\n    }\n  };\n\n  function getWindow() {\n    return window;\n  }\n\n  var windowHandler = {\n    redirect: function (url) {\n      getWindow().location = url;\n    },\n    getDocument: function () {\n      return getWindow().document;\n    },\n    getWindow: getWindow,\n    getOrigin: function () {\n      var location = getWindow().location,\n          origin = location.origin;\n      return origin || (origin = objectHelper.getOriginFromUrl(location.href)), origin;\n    }\n  },\n      commonjsGlobal = \"undefined\" != typeof globalThis ? globalThis : \"undefined\" != typeof window ? window : \"undefined\" != typeof global ? global : \"undefined\" != typeof self ? self : {};\n\n  var urlJoin = function (fn, module) {\n    return fn(module = {\n      exports: {}\n    }, module.exports), module.exports;\n  }(function (module) {\n    var context, definition;\n    context = commonjsGlobal, definition = function () {\n      function normalize(strArray) {\n        var resultArray = [];\n        if (0 === strArray.length) return \"\";\n        if (\"string\" != typeof strArray[0]) throw new TypeError(\"Url must be a string. Received \" + strArray[0]);\n\n        if (strArray[0].match(/^[^\\/:]+:\\/*$/) && strArray.length > 1) {\n          var first = strArray.shift();\n          strArray[0] = first + strArray[0];\n        }\n\n        strArray[0].match(/^file:\\/\\/\\//) ? strArray[0] = strArray[0].replace(/^([^\\/:]+):\\/*/, \"$1:///\") : strArray[0] = strArray[0].replace(/^([^\\/:]+):\\/*/, \"$1://\");\n\n        for (var i = 0; i < strArray.length; i++) {\n          var component = strArray[i];\n          if (\"string\" != typeof component) throw new TypeError(\"Url must be a string. Received \" + component);\n          \"\" !== component && (i > 0 && (component = component.replace(/^[\\/]+/, \"\")), component = i < strArray.length - 1 ? component.replace(/[\\/]+$/, \"\") : component.replace(/[\\/]+$/, \"/\"), resultArray.push(component));\n        }\n\n        var str = resultArray.join(\"/\"),\n            parts = (str = str.replace(/\\/(\\?|&|#[^!])/g, \"$1\")).split(\"?\");\n        return str = parts.shift() + (parts.length > 0 ? \"?\" : \"\") + parts.join(\"&\");\n      }\n\n      return function () {\n        return normalize(\"object\" == typeof arguments[0] ? arguments[0] : [].slice.call(arguments));\n      };\n    }, module.exports ? module.exports = definition() : context.urljoin = definition();\n  }),\n      has = Object.prototype.hasOwnProperty,\n      isArray$1 = Array.isArray,\n      hexTable = function () {\n    for (var array = [], i = 0; i < 256; ++i) array.push(\"%\" + ((i < 16 ? \"0\" : \"\") + i.toString(16)).toUpperCase());\n\n    return array;\n  }(),\n      arrayToObject = function (source, options) {\n    for (var obj = options && options.plainObjects ? Object.create(null) : {}, i = 0; i < source.length; ++i) void 0 !== source[i] && (obj[i] = source[i]);\n\n    return obj;\n  },\n      utils = {\n    arrayToObject: arrayToObject,\n    assign: function (target, source) {\n      return Object.keys(source).reduce(function (acc, key) {\n        return acc[key] = source[key], acc;\n      }, target);\n    },\n    combine: function (a, b) {\n      return [].concat(a, b);\n    },\n    compact: function (value) {\n      for (var queue = [{\n        obj: {\n          o: value\n        },\n        prop: \"o\"\n      }], refs = [], i = 0; i < queue.length; ++i) for (var item = queue[i], obj = item.obj[item.prop], keys = Object.keys(obj), j = 0; j < keys.length; ++j) {\n        var key = keys[j],\n            val = obj[key];\n        \"object\" == typeof val && null !== val && -1 === refs.indexOf(val) && (queue.push({\n          obj: obj,\n          prop: key\n        }), refs.push(val));\n      }\n\n      return function (queue) {\n        for (; queue.length > 1;) {\n          var item = queue.pop(),\n              obj = item.obj[item.prop];\n\n          if (isArray$1(obj)) {\n            for (var compacted = [], j = 0; j < obj.length; ++j) void 0 !== obj[j] && compacted.push(obj[j]);\n\n            item.obj[item.prop] = compacted;\n          }\n        }\n      }(queue), value;\n    },\n    decode: function (str, decoder, charset) {\n      var strWithoutPlus = str.replace(/\\+/g, \" \");\n      if (\"iso-8859-1\" === charset) return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);\n\n      try {\n        return decodeURIComponent(strWithoutPlus);\n      } catch (e) {\n        return strWithoutPlus;\n      }\n    },\n    encode: function (str, defaultEncoder, charset) {\n      if (0 === str.length) return str;\n      var string = str;\n      if (\"symbol\" == typeof str ? string = Symbol.prototype.toString.call(str) : \"string\" != typeof str && (string = String(str)), \"iso-8859-1\" === charset) return escape(string).replace(/%u[0-9a-f]{4}/gi, function ($0) {\n        return \"%26%23\" + parseInt($0.slice(2), 16) + \"%3B\";\n      });\n\n      for (var out = \"\", i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n        45 === c || 46 === c || 95 === c || 126 === c || c >= 48 && c <= 57 || c >= 65 && c <= 90 || c >= 97 && c <= 122 ? out += string.charAt(i) : c < 128 ? out += hexTable[c] : c < 2048 ? out += hexTable[192 | c >> 6] + hexTable[128 | 63 & c] : c < 55296 || c >= 57344 ? out += hexTable[224 | c >> 12] + hexTable[128 | c >> 6 & 63] + hexTable[128 | 63 & c] : (i += 1, c = 65536 + ((1023 & c) << 10 | 1023 & string.charCodeAt(i)), out += hexTable[240 | c >> 18] + hexTable[128 | c >> 12 & 63] + hexTable[128 | c >> 6 & 63] + hexTable[128 | 63 & c]);\n      }\n\n      return out;\n    },\n    isBuffer: function (obj) {\n      return !(!obj || \"object\" != typeof obj || !(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj)));\n    },\n    isRegExp: function (obj) {\n      return \"[object RegExp]\" === Object.prototype.toString.call(obj);\n    },\n    merge: function merge(target, source, options) {\n      if (!source) return target;\n\n      if (\"object\" != typeof source) {\n        if (isArray$1(target)) target.push(source);else {\n          if (!target || \"object\" != typeof target) return [target, source];\n          (options && (options.plainObjects || options.allowPrototypes) || !has.call(Object.prototype, source)) && (target[source] = !0);\n        }\n        return target;\n      }\n\n      if (!target || \"object\" != typeof target) return [target].concat(source);\n      var mergeTarget = target;\n      return isArray$1(target) && !isArray$1(source) && (mergeTarget = arrayToObject(target, options)), isArray$1(target) && isArray$1(source) ? (source.forEach(function (item, i) {\n        if (has.call(target, i)) {\n          var targetItem = target[i];\n          targetItem && \"object\" == typeof targetItem && item && \"object\" == typeof item ? target[i] = merge(targetItem, item, options) : target.push(item);\n        } else target[i] = item;\n      }), target) : Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n        return has.call(acc, key) ? acc[key] = merge(acc[key], value, options) : acc[key] = value, acc;\n      }, mergeTarget);\n    }\n  },\n      replace = String.prototype.replace,\n      percentTwenties = /%20/g,\n      Format = {\n    RFC1738: \"RFC1738\",\n    RFC3986: \"RFC3986\"\n  },\n      formats = utils.assign({\n    default: Format.RFC3986,\n    formatters: {\n      RFC1738: function (value) {\n        return replace.call(value, percentTwenties, \"+\");\n      },\n      RFC3986: function (value) {\n        return String(value);\n      }\n    }\n  }, Format),\n      has$1 = Object.prototype.hasOwnProperty,\n      arrayPrefixGenerators = {\n    brackets: function (prefix) {\n      return prefix + \"[]\";\n    },\n    comma: \"comma\",\n    indices: function (prefix, key) {\n      return prefix + \"[\" + key + \"]\";\n    },\n    repeat: function (prefix) {\n      return prefix;\n    }\n  },\n      isArray$2 = Array.isArray,\n      push = Array.prototype.push,\n      pushToArray = function (arr, valueOrArray) {\n    push.apply(arr, isArray$2(valueOrArray) ? valueOrArray : [valueOrArray]);\n  },\n      toISO = Date.prototype.toISOString,\n      defaultFormat = formats.default,\n      defaults = {\n    addQueryPrefix: !1,\n    allowDots: !1,\n    charset: \"utf-8\",\n    charsetSentinel: !1,\n    delimiter: \"&\",\n    encode: !0,\n    encoder: utils.encode,\n    encodeValuesOnly: !1,\n    format: defaultFormat,\n    formatter: formats.formatters[defaultFormat],\n    indices: !1,\n    serializeDate: function (date) {\n      return toISO.call(date);\n    },\n    skipNulls: !1,\n    strictNullHandling: !1\n  },\n      stringify = function stringify(object, prefix, generateArrayPrefix, strictNullHandling, skipNulls, encoder, filter, sort, allowDots, serializeDate, formatter, encodeValuesOnly, charset) {\n    var v,\n        obj = object;\n\n    if (\"function\" == typeof filter ? obj = filter(prefix, obj) : obj instanceof Date ? obj = serializeDate(obj) : \"comma\" === generateArrayPrefix && isArray$2(obj) && (obj = obj.join(\",\")), null === obj) {\n      if (strictNullHandling) return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder, charset) : prefix;\n      obj = \"\";\n    }\n\n    if (\"string\" == typeof (v = obj) || \"number\" == typeof v || \"boolean\" == typeof v || \"symbol\" == typeof v || \"bigint\" == typeof v || utils.isBuffer(obj)) return encoder ? [formatter(encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder, charset)) + \"=\" + formatter(encoder(obj, defaults.encoder, charset))] : [formatter(prefix) + \"=\" + formatter(String(obj))];\n    var objKeys,\n        values = [];\n    if (void 0 === obj) return values;\n    if (isArray$2(filter)) objKeys = filter;else {\n      var keys = Object.keys(obj);\n      objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n      var key = objKeys[i];\n      skipNulls && null === obj[key] || (isArray$2(obj) ? pushToArray(values, stringify(obj[key], \"function\" == typeof generateArrayPrefix ? generateArrayPrefix(prefix, key) : prefix, generateArrayPrefix, strictNullHandling, skipNulls, encoder, filter, sort, allowDots, serializeDate, formatter, encodeValuesOnly, charset)) : pushToArray(values, stringify(obj[key], prefix + (allowDots ? \".\" + key : \"[\" + key + \"]\"), generateArrayPrefix, strictNullHandling, skipNulls, encoder, filter, sort, allowDots, serializeDate, formatter, encodeValuesOnly, charset)));\n    }\n\n    return values;\n  },\n      lib_stringify = (Object.prototype.hasOwnProperty, function (object, opts) {\n    var objKeys,\n        obj = object,\n        options = function (opts) {\n      if (!opts) return defaults;\n      if (null !== opts.encoder && void 0 !== opts.encoder && \"function\" != typeof opts.encoder) throw new TypeError(\"Encoder has to be a function.\");\n      var charset = opts.charset || defaults.charset;\n      if (void 0 !== opts.charset && \"utf-8\" !== opts.charset && \"iso-8859-1\" !== opts.charset) throw new TypeError(\"The charset option must be either utf-8, iso-8859-1, or undefined\");\n      var format = formats.default;\n\n      if (void 0 !== opts.format) {\n        if (!has$1.call(formats.formatters, opts.format)) throw new TypeError(\"Unknown format option provided.\");\n        format = opts.format;\n      }\n\n      var formatter = formats.formatters[format],\n          filter = defaults.filter;\n      return (\"function\" == typeof opts.filter || isArray$2(opts.filter)) && (filter = opts.filter), {\n        addQueryPrefix: \"boolean\" == typeof opts.addQueryPrefix ? opts.addQueryPrefix : defaults.addQueryPrefix,\n        allowDots: void 0 === opts.allowDots ? defaults.allowDots : !!opts.allowDots,\n        charset: charset,\n        charsetSentinel: \"boolean\" == typeof opts.charsetSentinel ? opts.charsetSentinel : defaults.charsetSentinel,\n        delimiter: void 0 === opts.delimiter ? defaults.delimiter : opts.delimiter,\n        encode: \"boolean\" == typeof opts.encode ? opts.encode : defaults.encode,\n        encoder: \"function\" == typeof opts.encoder ? opts.encoder : defaults.encoder,\n        encodeValuesOnly: \"boolean\" == typeof opts.encodeValuesOnly ? opts.encodeValuesOnly : defaults.encodeValuesOnly,\n        filter: filter,\n        formatter: formatter,\n        serializeDate: \"function\" == typeof opts.serializeDate ? opts.serializeDate : defaults.serializeDate,\n        skipNulls: \"boolean\" == typeof opts.skipNulls ? opts.skipNulls : defaults.skipNulls,\n        sort: \"function\" == typeof opts.sort ? opts.sort : null,\n        strictNullHandling: \"boolean\" == typeof opts.strictNullHandling ? opts.strictNullHandling : defaults.strictNullHandling\n      };\n    }(opts);\n\n    \"function\" == typeof options.filter ? obj = (0, options.filter)(\"\", obj) : isArray$2(options.filter) && (objKeys = options.filter);\n    var arrayFormat,\n        keys = [];\n    if (\"object\" != typeof obj || null === obj) return \"\";\n    arrayFormat = opts && opts.arrayFormat in arrayPrefixGenerators ? opts.arrayFormat : opts && \"indices\" in opts ? opts.indices ? \"indices\" : \"repeat\" : \"indices\";\n    var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];\n    objKeys || (objKeys = Object.keys(obj)), options.sort && objKeys.sort(options.sort);\n\n    for (var i = 0; i < objKeys.length; ++i) {\n      var key = objKeys[i];\n      options.skipNulls && null === obj[key] || pushToArray(keys, stringify(obj[key], key, generateArrayPrefix, options.strictNullHandling, options.skipNulls, options.encode ? options.encoder : null, options.filter, options.sort, options.allowDots, options.serializeDate, options.formatter, options.encodeValuesOnly, options.charset));\n    }\n\n    var joined = keys.join(options.delimiter),\n        prefix = !0 === options.addQueryPrefix ? \"?\" : \"\";\n    return options.charsetSentinel && (\"iso-8859-1\" === options.charset ? prefix += \"utf8=%26%2310003%3B&\" : prefix += \"utf8=%E2%9C%93&\"), joined.length > 0 ? prefix + joined : \"\";\n  });\n\n  function PopupHandler(webAuth) {\n    this.webAuth = webAuth, this._current_popup = null, this.options = null;\n  }\n\n  function PluginHandler(webAuth) {\n    this.webAuth = webAuth;\n  }\n\n  function CordovaPlugin() {\n    this.webAuth = null, this.version = version.raw, this.extensibilityPoints = [\"popup.authorize\", \"popup.getPopupHandler\"];\n  }\n\n  return PopupHandler.prototype.preload = function (options) {\n    var _this = this,\n        _window = windowHandler.getWindow(),\n        url = options.url || \"about:blank\",\n        popupOptions = options.popupOptions || {};\n\n    popupOptions.location = \"yes\", delete popupOptions.width, delete popupOptions.height;\n    var windowFeatures = lib_stringify(popupOptions, {\n      encode: !1,\n      delimiter: \",\"\n    });\n    return this._current_popup && !this._current_popup.closed ? this._current_popup : (this._current_popup = _window.open(url, \"_blank\", windowFeatures), this._current_popup.kill = function (success) {\n      _this._current_popup.success = success, this.close(), _this._current_popup = null;\n    }, this._current_popup);\n  }, PopupHandler.prototype.load = function (url, _, options, cb) {\n    var _this = this;\n\n    this.url = url, this.options = options, this._current_popup ? this._current_popup.location.href = url : (options.url = url, this.preload(options)), this.transientErrorHandler = function (event) {\n      _this.errorHandler(event, cb);\n    }, this.transientStartHandler = function (event) {\n      _this.startHandler(event, cb);\n    }, this.transientExitHandler = function () {\n      _this.exitHandler(cb);\n    }, this._current_popup.addEventListener(\"loaderror\", this.transientErrorHandler), this._current_popup.addEventListener(\"loadstart\", this.transientStartHandler), this._current_popup.addEventListener(\"exit\", this.transientExitHandler);\n  }, PopupHandler.prototype.errorHandler = function (event, cb) {\n    this._current_popup && (this._current_popup.kill(!0), cb({\n      error: \"window_error\",\n      errorDescription: event.message\n    }));\n  }, PopupHandler.prototype.unhook = function () {\n    this._current_popup.removeEventListener(\"loaderror\", this.transientErrorHandler), this._current_popup.removeEventListener(\"loadstart\", this.transientStartHandler), this._current_popup.removeEventListener(\"exit\", this.transientExitHandler);\n  }, PopupHandler.prototype.exitHandler = function (cb) {\n    this._current_popup && (this.unhook(), this._current_popup.success || cb({\n      error: \"window_closed\",\n      errorDescription: \"Browser window closed\"\n    }));\n  }, PopupHandler.prototype.startHandler = function (event, cb) {\n    var _this = this;\n\n    if (this._current_popup) {\n      var callbackUrl = urlJoin(\"https:\", this.webAuth.baseOptions.domain, \"/mobile\");\n\n      if (!event.url || 0 === event.url.indexOf(callbackUrl + \"#\")) {\n        var parts = event.url.split(\"#\");\n\n        if (1 !== parts.length) {\n          var opts = {\n            hash: parts.pop()\n          };\n          this.options.nonce && (opts.nonce = this.options.nonce), this.webAuth.parseHash(opts, function (error, result) {\n            (error || result) && (_this._current_popup.kill(!0), cb(error, result));\n          });\n        }\n      }\n    }\n  }, PluginHandler.prototype.processParams = function (params) {\n    return params.redirectUri = urlJoin(\"https://\" + params.domain, \"mobile\"), delete params.owp, params;\n  }, PluginHandler.prototype.getPopupHandler = function () {\n    return new PopupHandler(this.webAuth);\n  }, CordovaPlugin.prototype.setWebAuth = function (webAuth) {\n    this.webAuth = webAuth;\n  }, CordovaPlugin.prototype.supports = function (extensibilityPoint) {\n    var _window = windowHandler.getWindow();\n\n    return (!!_window.cordova || !!_window.electron) && this.extensibilityPoints.indexOf(extensibilityPoint) > -1;\n  }, CordovaPlugin.prototype.init = function () {\n    return new PluginHandler(this.webAuth);\n  }, CordovaPlugin;\n});","map":{"version":3,"sources":["../src/version.js","../src/helper/assert.js","../src/helper/object-assign.js","../src/helper/object.js","../src/helper/window.js","../node_modules/url-join/lib/url-join.js","../node_modules/qs/lib/utils.js","../node_modules/qs/lib/formats.js","../node_modules/qs/lib/stringify.js","../node_modules/qs/lib/parse.js","../plugins/cordova/popup-handler.js","../plugins/cordova/plugin-handler.js","../plugins/cordova/index.js"],"names":["raw","toString","Object","prototype","attribute","o","attr","type","text","Error","variable","value","values","indexOf","config","attributes","optional","message","keys","index","length","a","condition","value_message","array","this","supportsIsArray","Array","isArray","call","check","assign","objectAssignPolyfill","target","TypeError","to","i","arguments","nextSource","keysArray","nextIndex","len","nextKey","desc","getOwnPropertyDescriptor","undefined","enumerable","get","pick","object","reduce","prev","key","obj","allowedKeys","notAllowed","push","extend","params","objectValues","unshift","objectAssign","apply","base","with","object2","keys2","blacklistedKeys","p","str","newKey","code","wasPrevNumber","wasPrevUppercase","charCodeAt","toLowerCase","parts","split","c","charAt","toUpperCase","slice","shift","toSnakeCase","exceptions","assert","camelToSnake","toCamelCase","options","keepOriginal","getLocationFromUrl","href","match","protocol","host","hostname","port","pathname","search","hash","url","parsed","origin","trim","trimmed","trimMultiple","blacklist","merge","getKeysNotIn","getOriginFromUrl","trimUserDetails","getWindow","location","document","window","objectHelper","redirect","getDocument","getOrigin","context","definition","module","exports","normalize","strArray","resultArray","first","replace","component","join","has","hasOwnProperty","hexTable","queue","item","pop","prop","compacted","j","arrayToObject","source","plainObjects","create","allowPrototypes","concat","mergeTarget","forEach","targetItem","acc","decoder","charset","strWithoutPlus","unescape","decodeURIComponent","e","defaultEncoder","string","Symbol","String","escape","$0","parseInt","out","refs","val","compactQueue","constructor","isBuffer","b","combine","compact","decode","encode","isRegExp","percentTwenties","Format","RFC1738","RFC3986","util","default","formatters","arrayPrefixGenerators","brackets","prefix","comma","indices","repeat","pushToArray","arr","valueOrArray","toISO","Date","toISOString","defaultFormat","formats","defaults","addQueryPrefix","allowDots","charsetSentinel","delimiter","encoder","utils","encodeValuesOnly","format","formatter","serializeDate","date","skipNulls","strictNullHandling","v","stringify","generateArrayPrefix","filter","sort","objKeys","opts","normalizeStringifyOptions","arrayFormat","joined","PopupHandler","webAuth","_current_popup","preload","_this","_window","windowHandler","popupOptions","width","height","windowFeatures","qs","closed","open","kill","success","close","load","_","cb","transientErrorHandler","event","errorHandler","transientStartHandler","startHandler","transientExitHandler","exitHandler","addEventListener","error","errorDescription","unhook","removeEventListener","callbackUrl","urljoin","baseOptions","domain","nonce","parseHash","result","PluginHandler","processParams","redirectUri","owp","getPopupHandler","CordovaPlugin","version","extensibilityPoints","setWebAuth","supports","extensibilityPoint","cordova","electron","init"],"mappings":"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","sourcesContent":["module.exports = { raw: '9.12.2' };\n","var toString = Object.prototype.toString;\n\nfunction attribute(o, attr, type, text) {\n  type = type === 'array' ? 'object' : type;\n  if (o && typeof o[attr] !== type) {\n    throw new Error(text);\n  }\n}\n\nfunction variable(o, type, text) {\n  if (typeof o !== type) {\n    throw new Error(text);\n  }\n}\n\nfunction value(o, values, text) {\n  if (values.indexOf(o) === -1) {\n    throw new Error(text);\n  }\n}\n\nfunction check(o, config, attributes) {\n  if (!config.optional || o) {\n    variable(o, config.type, config.message);\n  }\n  if (config.type === 'object' && attributes) {\n    var keys = Object.keys(attributes);\n\n    for (var index = 0; index < keys.length; index++) {\n      var a = keys[index];\n      if (!attributes[a].optional || o[a]) {\n        if (!attributes[a].condition || attributes[a].condition(o)) {\n          attribute(o, a, attributes[a].type, attributes[a].message);\n          if (attributes[a].values) {\n            value(o[a], attributes[a].values, attributes[a].value_message);\n          }\n        }\n      }\n    }\n  }\n}\n\n/**\n * Wrap `Array.isArray` Polyfill for IE9\n * source: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray\n *\n * @param {Array} array\n * @private\n */\nfunction isArray(array) {\n  if (this.supportsIsArray()) {\n    return Array.isArray(array);\n  }\n\n  return toString.call(array) === '[object Array]';\n}\n\nfunction supportsIsArray() {\n  return Array.isArray != null;\n}\n\nexport default {\n  check: check,\n  attribute: attribute,\n  variable: variable,\n  value: value,\n  isArray: isArray,\n  supportsIsArray: supportsIsArray\n};\n","/* eslint-disable no-continue */\n\nfunction get() {\n  if (!Object.assign) {\n    return objectAssignPolyfill;\n  }\n\n  return Object.assign;\n}\n\nfunction objectAssignPolyfill(target) {\n  if (target === undefined || target === null) {\n    throw new TypeError('Cannot convert first argument to object');\n  }\n\n  var to = Object(target);\n  for (var i = 1; i < arguments.length; i++) {\n    var nextSource = arguments[i];\n    if (nextSource === undefined || nextSource === null) {\n      continue;\n    }\n\n    var keysArray = Object.keys(Object(nextSource));\n    for (\n      var nextIndex = 0, len = keysArray.length;\n      nextIndex < len;\n      nextIndex++\n    ) {\n      var nextKey = keysArray[nextIndex];\n      var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);\n      if (desc !== undefined && desc.enumerable) {\n        to[nextKey] = nextSource[nextKey];\n      }\n    }\n  }\n  return to;\n}\n\nexport default {\n  get: get,\n  objectAssignPolyfill: objectAssignPolyfill\n};\n","/* eslint-disable no-param-reassign */\n/* eslint-disable no-restricted-syntax */\n/* eslint-disable guard-for-in */\n\nimport assert from './assert';\nimport objectAssign from './object-assign';\n\nfunction pick(object, keys) {\n  return keys.reduce(function(prev, key) {\n    if (object[key]) {\n      prev[key] = object[key];\n    }\n    return prev;\n  }, {});\n}\n\nfunction getKeysNotIn(obj, allowedKeys) {\n  var notAllowed = [];\n  for (var key in obj) {\n    if (allowedKeys.indexOf(key) === -1) {\n      notAllowed.push(key);\n    }\n  }\n  return notAllowed;\n}\n\nfunction objectValues(obj) {\n  var values = [];\n  for (var key in obj) {\n    values.push(obj[key]);\n  }\n  return values;\n}\n\nfunction extend() {\n  var params = objectValues(arguments);\n  params.unshift({});\n  return objectAssign.get().apply(undefined, params);\n}\n\nfunction merge(object, keys) {\n  return {\n    base: keys ? pick(object, keys) : object,\n    with: function(object2, keys2) {\n      object2 = keys2 ? pick(object2, keys2) : object2;\n      return extend(this.base, object2);\n    }\n  };\n}\n\nfunction blacklist(object, blacklistedKeys) {\n  return Object.keys(object).reduce(function(p, key) {\n    if (blacklistedKeys.indexOf(key) === -1) {\n      p[key] = object[key];\n    }\n    return p;\n  }, {});\n}\n\nfunction camelToSnake(str) {\n  var newKey = '';\n  var index = 0;\n  var code;\n  var wasPrevNumber = true;\n  var wasPrevUppercase = true;\n\n  while (index < str.length) {\n    code = str.charCodeAt(index);\n    if (\n      (!wasPrevUppercase && code >= 65 && code <= 90) ||\n      (!wasPrevNumber && code >= 48 && code <= 57)\n    ) {\n      newKey += '_';\n      newKey += str[index].toLowerCase();\n    } else {\n      newKey += str[index].toLowerCase();\n    }\n    wasPrevNumber = code >= 48 && code <= 57;\n    wasPrevUppercase = code >= 65 && code <= 90;\n    index++;\n  }\n\n  return newKey;\n}\n\nfunction snakeToCamel(str) {\n  var parts = str.split('_');\n  return parts.reduce(function(p, c) {\n    return p + c.charAt(0).toUpperCase() + c.slice(1);\n  }, parts.shift());\n}\n\nfunction toSnakeCase(object, exceptions) {\n  if (typeof object !== 'object' || assert.isArray(object) || object === null) {\n    return object;\n  }\n  exceptions = exceptions || [];\n\n  return Object.keys(object).reduce(function(p, key) {\n    var newKey = exceptions.indexOf(key) === -1 ? camelToSnake(key) : key;\n    p[newKey] = toSnakeCase(object[key]);\n    return p;\n  }, {});\n}\n\nfunction toCamelCase(object, exceptions, options) {\n  if (typeof object !== 'object' || assert.isArray(object) || object === null) {\n    return object;\n  }\n\n  exceptions = exceptions || [];\n  options = options || {};\n  return Object.keys(object).reduce(function(p, key) {\n    var newKey = exceptions.indexOf(key) === -1 ? snakeToCamel(key) : key;\n\n    p[newKey] = toCamelCase(object[newKey] || object[key], [], options);\n\n    if (options.keepOriginal) {\n      p[key] = toCamelCase(object[key], [], options);\n    }\n    return p;\n  }, {});\n}\n\nfunction getLocationFromUrl(href) {\n  var match = href.match(\n    /^(https?:|file:|chrome-extension:)\\/\\/(([^:/?#]*)(?::([0-9]+))?)([/]{0,1}[^?#]*)(\\?[^#]*|)(#.*|)$/\n  );\n  return (\n    match && {\n      href: href,\n      protocol: match[1],\n      host: match[2],\n      hostname: match[3],\n      port: match[4],\n      pathname: match[5],\n      search: match[6],\n      hash: match[7]\n    }\n  );\n}\n\nfunction getOriginFromUrl(url) {\n  if (!url) {\n    return undefined;\n  }\n  var parsed = getLocationFromUrl(url);\n  var origin = parsed.protocol + '//' + parsed.hostname;\n  if (parsed.port) {\n    origin += ':' + parsed.port;\n  }\n  return origin;\n}\n\nfunction trim(options, key) {\n  var trimmed = extend(options);\n  if (options[key]) {\n    trimmed[key] = options[key].trim();\n  }\n  return trimmed;\n}\n\nfunction trimMultiple(options, keys) {\n  return keys.reduce(trim, options);\n}\n\nfunction trimUserDetails(options) {\n  return trimMultiple(options, ['username', 'email', 'phoneNumber']);\n}\n\nexport default {\n  toSnakeCase: toSnakeCase,\n  toCamelCase: toCamelCase,\n  blacklist: blacklist,\n  merge: merge,\n  pick: pick,\n  getKeysNotIn: getKeysNotIn,\n  extend: extend,\n  getOriginFromUrl: getOriginFromUrl,\n  getLocationFromUrl: getLocationFromUrl,\n  trimUserDetails: trimUserDetails\n};\n","import objectHelper from './object';\n\nfunction redirect(url) {\n  getWindow().location = url;\n}\n\nfunction getDocument() {\n  return getWindow().document;\n}\n\nfunction getWindow() {\n  return window;\n}\n\nfunction getOrigin() {\n  var location = getWindow().location;\n  var origin = location.origin;\n\n  if (!origin) {\n    origin = objectHelper.getOriginFromUrl(location.href);\n  }\n\n  return origin;\n}\n\nexport default {\n  redirect: redirect,\n  getDocument: getDocument,\n  getWindow: getWindow,\n  getOrigin: getOrigin\n};\n","(function (name, context, definition) {\n  if (typeof module !== 'undefined' && module.exports) module.exports = definition();\n  else if (typeof define === 'function' && define.amd) define(definition);\n  else context[name] = definition();\n})('urljoin', this, function () {\n\n  function normalize (strArray) {\n    var resultArray = [];\n    if (strArray.length === 0) { return ''; }\n\n    if (typeof strArray[0] !== 'string') {\n      throw new TypeError('Url must be a string. Received ' + strArray[0]);\n    }\n\n    // If the first part is a plain protocol, we combine it with the next part.\n    if (strArray[0].match(/^[^/:]+:\\/*$/) && strArray.length > 1) {\n      var first = strArray.shift();\n      strArray[0] = first + strArray[0];\n    }\n\n    // There must be two or three slashes in the file protocol, two slashes in anything else.\n    if (strArray[0].match(/^file:\\/\\/\\//)) {\n      strArray[0] = strArray[0].replace(/^([^/:]+):\\/*/, '$1:///');\n    } else {\n      strArray[0] = strArray[0].replace(/^([^/:]+):\\/*/, '$1://');\n    }\n\n    for (var i = 0; i < strArray.length; i++) {\n      var component = strArray[i];\n\n      if (typeof component !== 'string') {\n        throw new TypeError('Url must be a string. Received ' + component);\n      }\n\n      if (component === '') { continue; }\n\n      if (i > 0) {\n        // Removing the starting slashes for each component but the first.\n        component = component.replace(/^[\\/]+/, '');\n      }\n      if (i < strArray.length - 1) {\n        // Removing the ending slashes for each component but the last.\n        component = component.replace(/[\\/]+$/, '');\n      } else {\n        // For the last component we will combine multiple slashes to a single one.\n        component = component.replace(/[\\/]+$/, '/');\n      }\n\n      resultArray.push(component);\n\n    }\n\n    var str = resultArray.join('/');\n    // Each input component is now separated by a single slash except the possible first plain protocol part.\n\n    // remove trailing slash before parameters or hash\n    str = str.replace(/\\/(\\?|&|#[^!])/g, '$1');\n\n    // replace ? in parameters with &\n    var parts = str.split('?');\n    str = parts.shift() + (parts.length > 0 ? '?': '') + parts.join('&');\n\n    return str;\n  }\n\n  return function () {\n    var input;\n\n    if (typeof arguments[0] === 'object') {\n      input = arguments[0];\n    } else {\n      input = [].slice.call(arguments);\n    }\n\n    return normalize(input);\n  };\n\n});\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar hexTable = (function () {\n    var array = [];\n    for (var i = 0; i < 256; ++i) {\n        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());\n    }\n\n    return array;\n}());\n\nvar compactQueue = function compactQueue(queue) {\n    while (queue.length > 1) {\n        var item = queue.pop();\n        var obj = item.obj[item.prop];\n\n        if (isArray(obj)) {\n            var compacted = [];\n\n            for (var j = 0; j < obj.length; ++j) {\n                if (typeof obj[j] !== 'undefined') {\n                    compacted.push(obj[j]);\n                }\n            }\n\n            item.obj[item.prop] = compacted;\n        }\n    }\n};\n\nvar arrayToObject = function arrayToObject(source, options) {\n    var obj = options && options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nvar merge = function merge(target, source, options) {\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (isArray(target)) {\n            target.push(source);\n        } else if (target && typeof target === 'object') {\n            if ((options && (options.plainObjects || options.allowPrototypes)) || !has.call(Object.prototype, source)) {\n                target[source] = true;\n            }\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (!target || typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (isArray(target) && !isArray(source)) {\n        mergeTarget = arrayToObject(target, options);\n    }\n\n    if (isArray(target) && isArray(source)) {\n        source.forEach(function (item, i) {\n            if (has.call(target, i)) {\n                var targetItem = target[i];\n                if (targetItem && typeof targetItem === 'object' && item && typeof item === 'object') {\n                    target[i] = merge(targetItem, item, options);\n                } else {\n                    target.push(item);\n                }\n            } else {\n                target[i] = item;\n            }\n        });\n        return target;\n    }\n\n    return Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (has.call(acc, key)) {\n            acc[key] = merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n        return acc;\n    }, mergeTarget);\n};\n\nvar assign = function assignSingleSource(target, source) {\n    return Object.keys(source).reduce(function (acc, key) {\n        acc[key] = source[key];\n        return acc;\n    }, target);\n};\n\nvar decode = function (str, decoder, charset) {\n    var strWithoutPlus = str.replace(/\\+/g, ' ');\n    if (charset === 'iso-8859-1') {\n        // unescape never throws, no try...catch needed:\n        return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);\n    }\n    // utf-8\n    try {\n        return decodeURIComponent(strWithoutPlus);\n    } catch (e) {\n        return strWithoutPlus;\n    }\n};\n\nvar encode = function encode(str, defaultEncoder, charset) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = str;\n    if (typeof str === 'symbol') {\n        string = Symbol.prototype.toString.call(str);\n    } else if (typeof str !== 'string') {\n        string = String(str);\n    }\n\n    if (charset === 'iso-8859-1') {\n        return escape(string).replace(/%u[0-9a-f]{4}/gi, function ($0) {\n            return '%26%23' + parseInt($0.slice(2), 16) + '%3B';\n        });\n    }\n\n    var out = '';\n    for (var i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n\n        if (\n            c === 0x2D // -\n            || c === 0x2E // .\n            || c === 0x5F // _\n            || c === 0x7E // ~\n            || (c >= 0x30 && c <= 0x39) // 0-9\n            || (c >= 0x41 && c <= 0x5A) // a-z\n            || (c >= 0x61 && c <= 0x7A) // A-Z\n        ) {\n            out += string.charAt(i);\n            continue;\n        }\n\n        if (c < 0x80) {\n            out = out + hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        i += 1;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));\n        out += hexTable[0xF0 | (c >> 18)]\n            + hexTable[0x80 | ((c >> 12) & 0x3F)]\n            + hexTable[0x80 | ((c >> 6) & 0x3F)]\n            + hexTable[0x80 | (c & 0x3F)];\n    }\n\n    return out;\n};\n\nvar compact = function compact(value) {\n    var queue = [{ obj: { o: value }, prop: 'o' }];\n    var refs = [];\n\n    for (var i = 0; i < queue.length; ++i) {\n        var item = queue[i];\n        var obj = item.obj[item.prop];\n\n        var keys = Object.keys(obj);\n        for (var j = 0; j < keys.length; ++j) {\n            var key = keys[j];\n            var val = obj[key];\n            if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {\n                queue.push({ obj: obj, prop: key });\n                refs.push(val);\n            }\n        }\n    }\n\n    compactQueue(queue);\n\n    return value;\n};\n\nvar isRegExp = function isRegExp(obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nvar isBuffer = function isBuffer(obj) {\n    if (!obj || typeof obj !== 'object') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\nvar combine = function combine(a, b) {\n    return [].concat(a, b);\n};\n\nmodule.exports = {\n    arrayToObject: arrayToObject,\n    assign: assign,\n    combine: combine,\n    compact: compact,\n    decode: decode,\n    encode: encode,\n    isBuffer: isBuffer,\n    isRegExp: isRegExp,\n    merge: merge\n};\n","'use strict';\n\nvar replace = String.prototype.replace;\nvar percentTwenties = /%20/g;\n\nvar util = require('./utils');\n\nvar Format = {\n    RFC1738: 'RFC1738',\n    RFC3986: 'RFC3986'\n};\n\nmodule.exports = util.assign(\n    {\n        'default': Format.RFC3986,\n        formatters: {\n            RFC1738: function (value) {\n                return replace.call(value, percentTwenties, '+');\n            },\n            RFC3986: function (value) {\n                return String(value);\n            }\n        }\n    },\n    Format\n);\n","'use strict';\n\nvar utils = require('./utils');\nvar formats = require('./formats');\nvar has = Object.prototype.hasOwnProperty;\n\nvar arrayPrefixGenerators = {\n    brackets: function brackets(prefix) { // eslint-disable-line func-name-matching\n        return prefix + '[]';\n    },\n    comma: 'comma',\n    indices: function indices(prefix, key) { // eslint-disable-line func-name-matching\n        return prefix + '[' + key + ']';\n    },\n    repeat: function repeat(prefix) { // eslint-disable-line func-name-matching\n        return prefix;\n    }\n};\n\nvar isArray = Array.isArray;\nvar push = Array.prototype.push;\nvar pushToArray = function (arr, valueOrArray) {\n    push.apply(arr, isArray(valueOrArray) ? valueOrArray : [valueOrArray]);\n};\n\nvar toISO = Date.prototype.toISOString;\n\nvar defaultFormat = formats['default'];\nvar defaults = {\n    addQueryPrefix: false,\n    allowDots: false,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    delimiter: '&',\n    encode: true,\n    encoder: utils.encode,\n    encodeValuesOnly: false,\n    format: defaultFormat,\n    formatter: formats.formatters[defaultFormat],\n    // deprecated\n    indices: false,\n    serializeDate: function serializeDate(date) { // eslint-disable-line func-name-matching\n        return toISO.call(date);\n    },\n    skipNulls: false,\n    strictNullHandling: false\n};\n\nvar isNonNullishPrimitive = function isNonNullishPrimitive(v) { // eslint-disable-line func-name-matching\n    return typeof v === 'string'\n        || typeof v === 'number'\n        || typeof v === 'boolean'\n        || typeof v === 'symbol'\n        || typeof v === 'bigint'; // eslint-disable-line valid-typeof\n};\n\nvar stringify = function stringify( // eslint-disable-line func-name-matching\n    object,\n    prefix,\n    generateArrayPrefix,\n    strictNullHandling,\n    skipNulls,\n    encoder,\n    filter,\n    sort,\n    allowDots,\n    serializeDate,\n    formatter,\n    encodeValuesOnly,\n    charset\n) {\n    var obj = object;\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (obj instanceof Date) {\n        obj = serializeDate(obj);\n    } else if (generateArrayPrefix === 'comma' && isArray(obj)) {\n        obj = obj.join(',');\n    }\n\n    if (obj === null) {\n        if (strictNullHandling) {\n            return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder, charset) : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (isNonNullishPrimitive(obj) || utils.isBuffer(obj)) {\n        if (encoder) {\n            var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder, charset);\n            return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults.encoder, charset))];\n        }\n        return [formatter(prefix) + '=' + formatter(String(obj))];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        if (isArray(obj)) {\n            pushToArray(values, stringify(\n                obj[key],\n                typeof generateArrayPrefix === 'function' ? generateArrayPrefix(prefix, key) : prefix,\n                generateArrayPrefix,\n                strictNullHandling,\n                skipNulls,\n                encoder,\n                filter,\n                sort,\n                allowDots,\n                serializeDate,\n                formatter,\n                encodeValuesOnly,\n                charset\n            ));\n        } else {\n            pushToArray(values, stringify(\n                obj[key],\n                prefix + (allowDots ? '.' + key : '[' + key + ']'),\n                generateArrayPrefix,\n                strictNullHandling,\n                skipNulls,\n                encoder,\n                filter,\n                sort,\n                allowDots,\n                serializeDate,\n                formatter,\n                encodeValuesOnly,\n                charset\n            ));\n        }\n    }\n\n    return values;\n};\n\nvar normalizeStringifyOptions = function normalizeStringifyOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.encoder !== null && opts.encoder !== undefined && typeof opts.encoder !== 'function') {\n        throw new TypeError('Encoder has to be a function.');\n    }\n\n    var charset = opts.charset || defaults.charset;\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n\n    var format = formats['default'];\n    if (typeof opts.format !== 'undefined') {\n        if (!has.call(formats.formatters, opts.format)) {\n            throw new TypeError('Unknown format option provided.');\n        }\n        format = opts.format;\n    }\n    var formatter = formats.formatters[format];\n\n    var filter = defaults.filter;\n    if (typeof opts.filter === 'function' || isArray(opts.filter)) {\n        filter = opts.filter;\n    }\n\n    return {\n        addQueryPrefix: typeof opts.addQueryPrefix === 'boolean' ? opts.addQueryPrefix : defaults.addQueryPrefix,\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        delimiter: typeof opts.delimiter === 'undefined' ? defaults.delimiter : opts.delimiter,\n        encode: typeof opts.encode === 'boolean' ? opts.encode : defaults.encode,\n        encoder: typeof opts.encoder === 'function' ? opts.encoder : defaults.encoder,\n        encodeValuesOnly: typeof opts.encodeValuesOnly === 'boolean' ? opts.encodeValuesOnly : defaults.encodeValuesOnly,\n        filter: filter,\n        formatter: formatter,\n        serializeDate: typeof opts.serializeDate === 'function' ? opts.serializeDate : defaults.serializeDate,\n        skipNulls: typeof opts.skipNulls === 'boolean' ? opts.skipNulls : defaults.skipNulls,\n        sort: typeof opts.sort === 'function' ? opts.sort : null,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = normalizeStringifyOptions(opts);\n\n    var objKeys;\n    var filter;\n\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (isArray(options.filter)) {\n        filter = options.filter;\n        objKeys = filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (opts && opts.arrayFormat in arrayPrefixGenerators) {\n        arrayFormat = opts.arrayFormat;\n    } else if (opts && 'indices' in opts) {\n        arrayFormat = opts.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (options.sort) {\n        objKeys.sort(options.sort);\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (options.skipNulls && obj[key] === null) {\n            continue;\n        }\n        pushToArray(keys, stringify(\n            obj[key],\n            key,\n            generateArrayPrefix,\n            options.strictNullHandling,\n            options.skipNulls,\n            options.encode ? options.encoder : null,\n            options.filter,\n            options.sort,\n            options.allowDots,\n            options.serializeDate,\n            options.formatter,\n            options.encodeValuesOnly,\n            options.charset\n        ));\n    }\n\n    var joined = keys.join(options.delimiter);\n    var prefix = options.addQueryPrefix === true ? '?' : '';\n\n    if (options.charsetSentinel) {\n        if (options.charset === 'iso-8859-1') {\n            // encodeURIComponent('&#10003;'), the \"numeric entity\" representation of a checkmark\n            prefix += 'utf8=%26%2310003%3B&';\n        } else {\n            // encodeURIComponent('✓')\n            prefix += 'utf8=%E2%9C%93&';\n        }\n    }\n\n    return joined.length > 0 ? prefix + joined : '';\n};\n","'use strict';\n\nvar utils = require('./utils');\n\nvar has = Object.prototype.hasOwnProperty;\n\nvar defaults = {\n    allowDots: false,\n    allowPrototypes: false,\n    arrayLimit: 20,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    comma: false,\n    decoder: utils.decode,\n    delimiter: '&',\n    depth: 5,\n    ignoreQueryPrefix: false,\n    interpretNumericEntities: false,\n    parameterLimit: 1000,\n    parseArrays: true,\n    plainObjects: false,\n    strictNullHandling: false\n};\n\nvar interpretNumericEntities = function (str) {\n    return str.replace(/&#(\\d+);/g, function ($0, numberStr) {\n        return String.fromCharCode(parseInt(numberStr, 10));\n    });\n};\n\n// This is what browsers will submit when the ✓ character occurs in an\n// application/x-www-form-urlencoded body and the encoding of the page containing\n// the form is iso-8859-1, or when the submitted form has an accept-charset\n// attribute of iso-8859-1. Presumably also with other charsets that do not contain\n// the ✓ character, such as us-ascii.\nvar isoSentinel = 'utf8=%26%2310003%3B'; // encodeURIComponent('&#10003;')\n\n// These are the percent-encoded utf-8 octets representing a checkmark, indicating that the request actually is utf-8 encoded.\nvar charsetSentinel = 'utf8=%E2%9C%93'; // encodeURIComponent('✓')\n\nvar parseValues = function parseQueryStringValues(str, options) {\n    var obj = {};\n    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\\?/, '') : str;\n    var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;\n    var parts = cleanStr.split(options.delimiter, limit);\n    var skipIndex = -1; // Keep track of where the utf8 sentinel was found\n    var i;\n\n    var charset = options.charset;\n    if (options.charsetSentinel) {\n        for (i = 0; i < parts.length; ++i) {\n            if (parts[i].indexOf('utf8=') === 0) {\n                if (parts[i] === charsetSentinel) {\n                    charset = 'utf-8';\n                } else if (parts[i] === isoSentinel) {\n                    charset = 'iso-8859-1';\n                }\n                skipIndex = i;\n                i = parts.length; // The eslint settings do not allow break;\n            }\n        }\n    }\n\n    for (i = 0; i < parts.length; ++i) {\n        if (i === skipIndex) {\n            continue;\n        }\n        var part = parts[i];\n\n        var bracketEqualsPos = part.indexOf(']=');\n        var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;\n\n        var key, val;\n        if (pos === -1) {\n            key = options.decoder(part, defaults.decoder, charset);\n            val = options.strictNullHandling ? null : '';\n        } else {\n            key = options.decoder(part.slice(0, pos), defaults.decoder, charset);\n            val = options.decoder(part.slice(pos + 1), defaults.decoder, charset);\n        }\n\n        if (val && options.interpretNumericEntities && charset === 'iso-8859-1') {\n            val = interpretNumericEntities(val);\n        }\n\n        if (val && options.comma && val.indexOf(',') > -1) {\n            val = val.split(',');\n        }\n\n        if (has.call(obj, key)) {\n            obj[key] = utils.combine(obj[key], val);\n        } else {\n            obj[key] = val;\n        }\n    }\n\n    return obj;\n};\n\nvar parseObject = function (chain, val, options) {\n    var leaf = val;\n\n    for (var i = chain.length - 1; i >= 0; --i) {\n        var obj;\n        var root = chain[i];\n\n        if (root === '[]' && options.parseArrays) {\n            obj = [].concat(leaf);\n        } else {\n            obj = options.plainObjects ? Object.create(null) : {};\n            var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;\n            var index = parseInt(cleanRoot, 10);\n            if (!options.parseArrays && cleanRoot === '') {\n                obj = { 0: leaf };\n            } else if (\n                !isNaN(index)\n                && root !== cleanRoot\n                && String(index) === cleanRoot\n                && index >= 0\n                && (options.parseArrays && index <= options.arrayLimit)\n            ) {\n                obj = [];\n                obj[index] = leaf;\n            } else {\n                obj[cleanRoot] = leaf;\n            }\n        }\n\n        leaf = obj;\n    }\n\n    return leaf;\n};\n\nvar parseKeys = function parseQueryStringKeys(givenKey, val, options) {\n    if (!givenKey) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n    var key = options.allowDots ? givenKey.replace(/\\.([^.[]+)/g, '[$1]') : givenKey;\n\n    // The regex chunks\n\n    var brackets = /(\\[[^[\\]]*])/;\n    var child = /(\\[[^[\\]]*])/g;\n\n    // Get the parent\n\n    var segment = options.depth > 0 && brackets.exec(key);\n    var parent = segment ? key.slice(0, segment.index) : key;\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (parent) {\n        // If we aren't using plain objects, optionally prefix keys that would overwrite object prototype properties\n        if (!options.plainObjects && has.call(Object.prototype, parent)) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(parent);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while (options.depth > 0 && (segment = child.exec(key)) !== null && i < options.depth) {\n        i += 1;\n        if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return parseObject(keys, val, options);\n};\n\nvar normalizeParseOptions = function normalizeParseOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.decoder !== null && opts.decoder !== undefined && typeof opts.decoder !== 'function') {\n        throw new TypeError('Decoder has to be a function.');\n    }\n\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new Error('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n    var charset = typeof opts.charset === 'undefined' ? defaults.charset : opts.charset;\n\n    return {\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        allowPrototypes: typeof opts.allowPrototypes === 'boolean' ? opts.allowPrototypes : defaults.allowPrototypes,\n        arrayLimit: typeof opts.arrayLimit === 'number' ? opts.arrayLimit : defaults.arrayLimit,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        comma: typeof opts.comma === 'boolean' ? opts.comma : defaults.comma,\n        decoder: typeof opts.decoder === 'function' ? opts.decoder : defaults.decoder,\n        delimiter: typeof opts.delimiter === 'string' || utils.isRegExp(opts.delimiter) ? opts.delimiter : defaults.delimiter,\n        // eslint-disable-next-line no-implicit-coercion, no-extra-parens\n        depth: (typeof opts.depth === 'number' || opts.depth === false) ? +opts.depth : defaults.depth,\n        ignoreQueryPrefix: opts.ignoreQueryPrefix === true,\n        interpretNumericEntities: typeof opts.interpretNumericEntities === 'boolean' ? opts.interpretNumericEntities : defaults.interpretNumericEntities,\n        parameterLimit: typeof opts.parameterLimit === 'number' ? opts.parameterLimit : defaults.parameterLimit,\n        parseArrays: opts.parseArrays !== false,\n        plainObjects: typeof opts.plainObjects === 'boolean' ? opts.plainObjects : defaults.plainObjects,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (str, opts) {\n    var options = normalizeParseOptions(opts);\n\n    if (str === '' || str === null || typeof str === 'undefined') {\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newObj = parseKeys(key, tempObj[key], options);\n        obj = utils.merge(obj, newObj, options);\n    }\n\n    return utils.compact(obj);\n};\n","import windowHandler from '../../src/helper/window';\nimport qs from 'qs';\nimport urljoin from 'url-join';\n\nfunction PopupHandler(webAuth) {\n  this.webAuth = webAuth;\n  this._current_popup = null;\n  this.options = null;\n}\n\nPopupHandler.prototype.preload = function(options) {\n  var _this = this;\n  var _window = windowHandler.getWindow();\n\n  var url = options.url || 'about:blank';\n  var popupOptions = options.popupOptions || {};\n\n  popupOptions.location = 'yes';\n  delete popupOptions.width;\n  delete popupOptions.height;\n\n  var windowFeatures = qs.stringify(popupOptions, {\n    encode: false,\n    delimiter: ','\n  });\n\n  if (this._current_popup && !this._current_popup.closed) {\n    return this._current_popup;\n  }\n\n  this._current_popup = _window.open(url, '_blank', windowFeatures);\n\n  this._current_popup.kill = function(success) {\n    _this._current_popup.success = success;\n    this.close();\n    _this._current_popup = null;\n  };\n\n  return this._current_popup;\n};\n\nPopupHandler.prototype.load = function(url, _, options, cb) {\n  var _this = this;\n  this.url = url;\n  this.options = options;\n  if (!this._current_popup) {\n    options.url = url;\n    this.preload(options);\n  } else {\n    this._current_popup.location.href = url;\n  }\n\n  this.transientErrorHandler = function(event) {\n    _this.errorHandler(event, cb);\n  };\n\n  this.transientStartHandler = function(event) {\n    _this.startHandler(event, cb);\n  };\n\n  this.transientExitHandler = function() {\n    _this.exitHandler(cb);\n  };\n\n  this._current_popup.addEventListener('loaderror', this.transientErrorHandler);\n  this._current_popup.addEventListener('loadstart', this.transientStartHandler);\n  this._current_popup.addEventListener('exit', this.transientExitHandler);\n};\n\nPopupHandler.prototype.errorHandler = function(event, cb) {\n  if (!this._current_popup) {\n    return;\n  }\n\n  this._current_popup.kill(true);\n\n  cb({ error: 'window_error', errorDescription: event.message });\n};\n\nPopupHandler.prototype.unhook = function() {\n  this._current_popup.removeEventListener(\n    'loaderror',\n    this.transientErrorHandler\n  );\n  this._current_popup.removeEventListener(\n    'loadstart',\n    this.transientStartHandler\n  );\n  this._current_popup.removeEventListener('exit', this.transientExitHandler);\n};\n\nPopupHandler.prototype.exitHandler = function(cb) {\n  if (!this._current_popup) {\n    return;\n  }\n\n  // when the modal is closed, this event is called which ends up removing the\n  // event listeners. If you move this before closing the modal, it will add ~1 sec\n  // delay between the user being redirected to the callback and the popup gets closed.\n  this.unhook();\n\n  if (!this._current_popup.success) {\n    cb({ error: 'window_closed', errorDescription: 'Browser window closed' });\n  }\n};\n\nPopupHandler.prototype.startHandler = function(event, cb) {\n  var _this = this;\n\n  if (!this._current_popup) {\n    return;\n  }\n\n  var callbackUrl = urljoin(\n    'https:',\n    this.webAuth.baseOptions.domain,\n    '/mobile'\n  );\n\n  if (event.url && !(event.url.indexOf(callbackUrl + '#') === 0)) {\n    return;\n  }\n\n  var parts = event.url.split('#');\n\n  if (parts.length === 1) {\n    return;\n  }\n\n  var opts = { hash: parts.pop() };\n\n  if (this.options.nonce) {\n    opts.nonce = this.options.nonce;\n  }\n\n  this.webAuth.parseHash(opts, function(error, result) {\n    if (error || result) {\n      _this._current_popup.kill(true);\n      cb(error, result);\n    }\n  });\n};\n\nexport default PopupHandler;\n","import urljoin from 'url-join';\nimport PopupHandler from './popup-handler';\n\nfunction PluginHandler(webAuth) {\n  this.webAuth = webAuth;\n}\n\nPluginHandler.prototype.processParams = function(params) {\n  params.redirectUri = urljoin('https://' + params.domain, 'mobile');\n  delete params.owp;\n  return params;\n};\n\nPluginHandler.prototype.getPopupHandler = function() {\n  return new PopupHandler(this.webAuth);\n};\n\nexport default PluginHandler;\n","import version from '../../src/version';\nimport windowHandler from '../../src/helper/window';\nimport PluginHandler from './plugin-handler';\n\nfunction CordovaPlugin() {\n  this.webAuth = null;\n  this.version = version.raw;\n  this.extensibilityPoints = ['popup.authorize', 'popup.getPopupHandler'];\n}\n\nCordovaPlugin.prototype.setWebAuth = function(webAuth) {\n  this.webAuth = webAuth;\n};\n\nCordovaPlugin.prototype.supports = function(extensibilityPoint) {\n  var _window = windowHandler.getWindow();\n  return (\n    (!!_window.cordova || !!_window.electron) &&\n    this.extensibilityPoints.indexOf(extensibilityPoint) > -1\n  );\n};\n\nCordovaPlugin.prototype.init = function() {\n  return new PluginHandler(this.webAuth);\n};\n\nexport default CordovaPlugin;\n"]},"metadata":{},"sourceType":"script"}