{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\nexports.observe = observe;\nexports.subscribe = subscribe;\nexports.unsubscribe = unsubscribe;\nexports.swap = swap;\nexports.updateEntity = updateEntity;\nexports.setEntity = setEntity;\nexports.read = read;\nexports.getEntity = getEntity;\nexports.removeEntity = removeEntity;\nexports.getCollection = getCollection;\nexports.updateCollection = updateCollection;\nexports.getState = getState;\n\nvar _atom = require('../utils/atom');\n\nvar _atom2 = _interopRequireDefault(_atom);\n\nvar _immutable = require('immutable');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar store = (0, _atom2.default)(new _immutable.Map({}));\n\nfunction observe(key, id, f) {\n  subscribe(key + '-' + id, function (_, oldState, newState) {\n    var m = getEntity(newState, 'lock', id);\n    var oldM = getEntity(oldState, 'lock', id);\n\n    if (m && !m.equals(oldM)) {\n      f(m);\n    }\n  });\n}\n\nfunction subscribe(key, f) {\n  store.addWatch(key, f);\n}\n\nfunction unsubscribe(key) {\n  store.removeWatch(key);\n}\n\nfunction swap() {\n  return store.swap.apply(store, arguments);\n}\n\nfunction updateEntity(state, coll, id, f) {\n  for (var _len = arguments.length, args = Array(_len > 4 ? _len - 4 : 0), _key = 4; _key < _len; _key++) {\n    args[_key - 4] = arguments[_key];\n  }\n\n  return state.updateIn([coll, id], new _immutable.Map({}), function (x) {\n    return f.apply(undefined, [x].concat(args));\n  });\n}\n\nfunction setEntity(state, coll, id, m) {\n  return state.setIn([coll, id], m);\n}\n\nfunction read(f) {\n  for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n\n  return f.apply(undefined, [store.deref()].concat(args));\n}\n\nfunction getEntity(state, coll) {\n  var id = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  return state.getIn([coll, id]);\n}\n\nfunction removeEntity(state, coll) {\n  var id = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  return state.removeIn([coll, id]);\n}\n\nfunction getCollection(state, coll) {\n  return state.get(coll, (0, _immutable.Map)()).toList();\n} // TODO: try to remove this fn\n\n\nfunction updateCollection(state, coll, f) {\n  for (var _len3 = arguments.length, args = Array(_len3 > 3 ? _len3 - 3 : 0), _key3 = 3; _key3 < _len3; _key3++) {\n    args[_key3 - 3] = arguments[_key3];\n  }\n\n  return state.update(coll, function (xs) {\n    return f.apply(undefined, [xs].concat(args));\n  });\n}\n\nfunction getState() {\n  return store.deref();\n} // DEV\n// store.addWatch(\"keepHistory\", (key, oldState, newState) => {\n//   if (!global.window.h) global.window.h = []; global.window.h.push(newState);\n//   console.debug(\"something changed\", newState.toJS());\n// });","map":{"version":3,"sources":["/Users/jacksonmccomas/Documents/Lambda/labs/startup-grant-database-fe/grantly/node_modules/auth0-lock/lib/store/index.js"],"names":["exports","__esModule","observe","subscribe","unsubscribe","swap","updateEntity","setEntity","read","getEntity","removeEntity","getCollection","updateCollection","getState","_atom","require","_atom2","_interopRequireDefault","_immutable","obj","default","store","Map","key","id","f","_","oldState","newState","m","oldM","equals","addWatch","removeWatch","apply","arguments","state","coll","_len","length","args","Array","_key","updateIn","x","undefined","concat","setIn","_len2","_key2","deref","getIn","removeIn","get","toList","_len3","_key3","update","xs"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\nexports.observe = observe;\nexports.subscribe = subscribe;\nexports.unsubscribe = unsubscribe;\nexports.swap = swap;\nexports.updateEntity = updateEntity;\nexports.setEntity = setEntity;\nexports.read = read;\nexports.getEntity = getEntity;\nexports.removeEntity = removeEntity;\nexports.getCollection = getCollection;\nexports.updateCollection = updateCollection;\nexports.getState = getState;\n\nvar _atom = require('../utils/atom');\n\nvar _atom2 = _interopRequireDefault(_atom);\n\nvar _immutable = require('immutable');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar store = (0, _atom2.default)(new _immutable.Map({}));\n\nfunction observe(key, id, f) {\n  subscribe(key + '-' + id, function (_, oldState, newState) {\n    var m = getEntity(newState, 'lock', id);\n    var oldM = getEntity(oldState, 'lock', id);\n    if (m && !m.equals(oldM)) {\n      f(m);\n    }\n  });\n}\n\nfunction subscribe(key, f) {\n  store.addWatch(key, f);\n}\n\nfunction unsubscribe(key) {\n  store.removeWatch(key);\n}\n\nfunction swap() {\n  return store.swap.apply(store, arguments);\n}\n\nfunction updateEntity(state, coll, id, f) {\n  for (var _len = arguments.length, args = Array(_len > 4 ? _len - 4 : 0), _key = 4; _key < _len; _key++) {\n    args[_key - 4] = arguments[_key];\n  }\n\n  return state.updateIn([coll, id], new _immutable.Map({}), function (x) {\n    return f.apply(undefined, [x].concat(args));\n  });\n}\n\nfunction setEntity(state, coll, id, m) {\n  return state.setIn([coll, id], m);\n}\n\nfunction read(f) {\n  for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n\n  return f.apply(undefined, [store.deref()].concat(args));\n}\n\nfunction getEntity(state, coll) {\n  var id = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n  return state.getIn([coll, id]);\n}\n\nfunction removeEntity(state, coll) {\n  var id = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n  return state.removeIn([coll, id]);\n}\n\nfunction getCollection(state, coll) {\n  return state.get(coll, (0, _immutable.Map)()).toList();\n}\n\n// TODO: try to remove this fn\nfunction updateCollection(state, coll, f) {\n  for (var _len3 = arguments.length, args = Array(_len3 > 3 ? _len3 - 3 : 0), _key3 = 3; _key3 < _len3; _key3++) {\n    args[_key3 - 3] = arguments[_key3];\n  }\n\n  return state.update(coll, function (xs) {\n    return f.apply(undefined, [xs].concat(args));\n  });\n}\n\nfunction getState() {\n  return store.deref();\n}\n\n// DEV\n// store.addWatch(\"keepHistory\", (key, oldState, newState) => {\n//   if (!global.window.h) global.window.h = []; global.window.h.push(newState);\n//   console.debug(\"something changed\", newState.toJS());\n// });\n"]},"metadata":{},"sourceType":"script"}