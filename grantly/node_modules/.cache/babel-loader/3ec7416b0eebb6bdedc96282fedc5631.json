{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar Cache = function () {\n  function Cache(fetchFn) {\n    _classCallCheck(this, Cache);\n\n    this.cache = {};\n    this.cbs = {};\n    this.fetchFn = fetchFn;\n  }\n\n  Cache.prototype.get = function get() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var cb = args.pop();\n    var key = JSON.stringify(args);\n    if (this.cache[key]) return cb(null, this.cache[key]);\n    if (this.registerCallback(key, cb) > 1) return;\n    this.fetch(key, args);\n  };\n\n  Cache.prototype.fetch = function fetch(key, args) {\n    var _this = this;\n\n    this.fetchFn.apply(this, args.concat([function (error, result) {\n      if (!error) _this.cache[key] = result;\n\n      _this.execCallbacks(key, error, result);\n    }]));\n  };\n\n  Cache.prototype.registerCallback = function registerCallback(key, cb) {\n    this.cbs[key] = this.cbs[key] || [];\n    this.cbs[key].push(cb);\n    return this.cbs[key].length;\n  };\n\n  Cache.prototype.execCallbacks = function execCallbacks(key) {\n    for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    if (this.cbs[key]) this.cbs[key].forEach(function (f) {\n      return f.apply(undefined, args);\n    });\n    delete this.cbs[key];\n  };\n\n  return Cache;\n}();\n\nexports.default = Cache;","map":{"version":3,"sources":["/Users/jacksonmccomas/Documents/Lambda/labs/startup-grant-database-fe/grantly/node_modules/auth0-lock/lib/utils/cache.js"],"names":["exports","__esModule","_classCallCheck","instance","Constructor","TypeError","Cache","fetchFn","cache","cbs","prototype","get","_len","arguments","length","args","Array","_key","cb","pop","key","JSON","stringify","registerCallback","fetch","_this","apply","concat","error","result","execCallbacks","push","_len2","_key2","forEach","f","undefined","default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Cache = function () {\n  function Cache(fetchFn) {\n    _classCallCheck(this, Cache);\n\n    this.cache = {};\n    this.cbs = {};\n    this.fetchFn = fetchFn;\n  }\n\n  Cache.prototype.get = function get() {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var cb = args.pop();\n    var key = JSON.stringify(args);\n    if (this.cache[key]) return cb(null, this.cache[key]);\n    if (this.registerCallback(key, cb) > 1) return;\n    this.fetch(key, args);\n  };\n\n  Cache.prototype.fetch = function fetch(key, args) {\n    var _this = this;\n\n    this.fetchFn.apply(this, args.concat([function (error, result) {\n      if (!error) _this.cache[key] = result;\n      _this.execCallbacks(key, error, result);\n    }]));\n  };\n\n  Cache.prototype.registerCallback = function registerCallback(key, cb) {\n    this.cbs[key] = this.cbs[key] || [];\n    this.cbs[key].push(cb);\n    return this.cbs[key].length;\n  };\n\n  Cache.prototype.execCallbacks = function execCallbacks(key) {\n    for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    if (this.cbs[key]) this.cbs[key].forEach(function (f) {\n      return f.apply(undefined, args);\n    });\n    delete this.cbs[key];\n  };\n\n  return Cache;\n}();\n\nexports.default = Cache;\n"]},"metadata":{},"sourceType":"script"}