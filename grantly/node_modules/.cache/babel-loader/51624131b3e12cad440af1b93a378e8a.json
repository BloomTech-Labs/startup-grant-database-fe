{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.skipQuickAuth = skipQuickAuth;\nexports.logIn = logIn;\nexports.checkSession = checkSession;\n\nvar _quick_auth = require('../quick_auth');\n\nvar _index = require('../store/index');\n\nvar _actions = require('../core/actions');\n\nvar _index2 = require('../core/index');\n\nvar l = _interopRequireWildcard(_index2);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction skipQuickAuth(id) {\n  (0, _index.swap)(_index.updateEntity, 'lock', id, _quick_auth.skipQuickAuth, true);\n}\n\nfunction logIn(id, connection, loginHint, prompt) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n  var connectionScopes = l.auth.connectionScopes(m);\n  var scopes = connectionScopes.get(connection.get('name'));\n  var params = {\n    connection: connection.get('name'),\n    connection_scope: scopes ? scopes.toJS() : undefined\n  };\n\n  if (!l.auth.redirect(m) && connection.get('strategy') === 'facebook') {\n    params.display = 'popup';\n  }\n\n  if (loginHint) {\n    params.login_hint = loginHint;\n  }\n\n  if (prompt) {\n    params.prompt = prompt;\n  }\n\n  if (connection.get('strategy') === 'apple') {\n    (0, _index.swap)(_index.updateEntity, 'lock', l.id(m), l.setSupressSubmitOverlay, true);\n  } else {\n    (0, _index.swap)(_index.updateEntity, 'lock', l.id(m), l.setSupressSubmitOverlay, false);\n  }\n\n  params.isSubmitting = false;\n  (0, _actions.logIn)(id, [], params);\n}\n\nfunction checkSession(id, connection, loginHint) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n\n  if (l.auth.responseType(m).indexOf('code') >= 0) {\n    // we need to force a redirect in this case\n    // so we use login with prompt=none\n    return logIn(id, connection, loginHint, 'none');\n  } else {\n    var connectionScopes = l.auth.connectionScopes(m);\n    var scopes = connectionScopes.get(connection.get('name'));\n\n    var params = _extends({}, l.auth.params(m).toJS(), {\n      connection: connection.get('name')\n    });\n\n    (0, _actions.checkSession)(id, params);\n  }\n}","map":{"version":3,"sources":["/Users/jacksonmccomas/Documents/Lambda/labs/startup-grant-database-fe/grantly/node_modules/auth0-lock/lib/quick-auth/actions.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","skipQuickAuth","logIn","checkSession","_quick_auth","require","_index","_actions","_index2","l","_interopRequireWildcard","obj","newObj","default","id","swap","updateEntity","connection","loginHint","prompt","m","read","getEntity","connectionScopes","auth","scopes","get","params","connection_scope","toJS","undefined","redirect","display","login_hint","setSupressSubmitOverlay","isSubmitting","responseType","indexOf"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.skipQuickAuth = skipQuickAuth;\nexports.logIn = logIn;\nexports.checkSession = checkSession;\n\nvar _quick_auth = require('../quick_auth');\n\nvar _index = require('../store/index');\n\nvar _actions = require('../core/actions');\n\nvar _index2 = require('../core/index');\n\nvar l = _interopRequireWildcard(_index2);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction skipQuickAuth(id) {\n  (0, _index.swap)(_index.updateEntity, 'lock', id, _quick_auth.skipQuickAuth, true);\n}\n\nfunction logIn(id, connection, loginHint, prompt) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n  var connectionScopes = l.auth.connectionScopes(m);\n  var scopes = connectionScopes.get(connection.get('name'));\n  var params = {\n    connection: connection.get('name'),\n    connection_scope: scopes ? scopes.toJS() : undefined\n  };\n  if (!l.auth.redirect(m) && connection.get('strategy') === 'facebook') {\n    params.display = 'popup';\n  }\n  if (loginHint) {\n    params.login_hint = loginHint;\n  }\n  if (prompt) {\n    params.prompt = prompt;\n  }\n\n  if (connection.get('strategy') === 'apple') {\n    (0, _index.swap)(_index.updateEntity, 'lock', l.id(m), l.setSupressSubmitOverlay, true);\n  } else {\n    (0, _index.swap)(_index.updateEntity, 'lock', l.id(m), l.setSupressSubmitOverlay, false);\n  }\n\n  params.isSubmitting = false;\n  (0, _actions.logIn)(id, [], params);\n}\n\nfunction checkSession(id, connection, loginHint) {\n  var m = (0, _index.read)(_index.getEntity, 'lock', id);\n  if (l.auth.responseType(m).indexOf('code') >= 0) {\n    // we need to force a redirect in this case\n    // so we use login with prompt=none\n    return logIn(id, connection, loginHint, 'none');\n  } else {\n    var connectionScopes = l.auth.connectionScopes(m);\n    var scopes = connectionScopes.get(connection.get('name'));\n    var params = _extends({}, l.auth.params(m).toJS(), {\n      connection: connection.get('name')\n    });\n\n    (0, _actions.checkSession)(id, params);\n  }\n}\n"]},"metadata":{},"sourceType":"script"}