{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _screen = require('../../core/screen');\n\nvar _screen2 = _interopRequireDefault(_screen);\n\nvar _social_buttons_pane = require('../../field/social/social_buttons_pane');\n\nvar _social_buttons_pane2 = _interopRequireDefault(_social_buttons_pane);\n\nvar _login_pane = require('../../connection/database/login_pane');\n\nvar _login_pane2 = _interopRequireDefault(_login_pane);\n\nvar _pane_separator = require('../../core/pane_separator');\n\nvar _pane_separator2 = _interopRequireDefault(_pane_separator);\n\nvar _index = require('../../connection/database/index');\n\nvar _actions = require('../../connection/database/actions');\n\nvar _signed_in_confirmation = require('../../core/signed_in_confirmation');\n\nvar _login_sign_up_tabs = require('../../connection/database/login_sign_up_tabs');\n\nvar _login_sign_up_tabs2 = _interopRequireDefault(_login_sign_up_tabs);\n\nvar _index2 = require('../../core/index');\n\nvar l = _interopRequireWildcard(_index2);\n\nvar _actions2 = require('../../connection/enterprise/actions');\n\nvar _enterprise = require('../../connection/enterprise');\n\nvar _single_sign_on_notice = require('../../connection/enterprise/single_sign_on_notice');\n\nvar _single_sign_on_notice2 = _interopRequireDefault(_single_sign_on_notice);\n\nvar _classic = require('../classic');\n\nvar _i18n = require('../../i18n');\n\nvar i18n = _interopRequireWildcard(_i18n);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nfunction shouldRenderTabs(m) {\n  if ((0, _classic.isSSOEnabled)(m)) return false;\n  if (l.hasSomeConnections(m, 'database')) return (0, _index.hasScreen)(m, 'signUp');\n  if (l.hasSomeConnections(m, 'social') && (0, _index.hasInitialScreen)(m, 'signUp')) return (0, _index.hasScreen)(m, 'signUp');\n}\n\nvar Component = function Component(_ref) {\n  var i18n = _ref.i18n,\n      model = _ref.model;\n  var sso = (0, _classic.isSSOEnabled)(model);\n  var onlySocial = (0, _classic.hasOnlyClassicConnections)(model, 'social');\n\n  var tabs = shouldRenderTabs(model) && _react2.default.createElement(_login_sign_up_tabs2.default, {\n    key: 'loginsignup',\n    lock: model,\n    loginLabel: i18n.str('loginLabel'),\n    signUpLink: (0, _index.signUpLink)(model),\n    signUpLabel: i18n.str('signUpLabel')\n  });\n\n  var social = l.hasSomeConnections(model, 'social') && _react2.default.createElement(_social_buttons_pane2.default, {\n    instructions: i18n.html('socialLoginInstructions'),\n    labelFn: i18n.str,\n    lock: model,\n    showLoading: onlySocial,\n    signUp: false\n  });\n\n  var showPassword = !sso && (l.hasSomeConnections(model, 'database') || !!(0, _enterprise.findADConnectionWithoutDomain)(model));\n  var showForgotPasswordLink = showPassword && l.hasSomeConnections(model, 'database');\n  var loginInstructionsKey = social ? 'databaseEnterpriseAlternativeLoginInstructions' : 'databaseEnterpriseLoginInstructions';\n  var usernameInputPlaceholderKey = (0, _index.databaseUsernameStyle)(model) === 'any' || l.countConnections(model, 'enterprise') > 1 ? 'usernameOrEmailInputPlaceholder' : 'usernameInputPlaceholder';\n  var usernameStyle = (0, _index.databaseUsernameStyle)(model);\n\n  var login = (sso || l.hasSomeConnections(model, 'database') || l.hasSomeConnections(model, 'enterprise')) && _react2.default.createElement(_login_pane2.default, {\n    emailInputPlaceholder: i18n.str('emailInputPlaceholder'),\n    forgotPasswordAction: i18n.str('forgotPasswordAction'),\n    i18n: i18n,\n    instructions: i18n.html(loginInstructionsKey),\n    lock: model,\n    passwordInputPlaceholder: i18n.str('passwordInputPlaceholder'),\n    showForgotPasswordLink: showForgotPasswordLink,\n    showPassword: showPassword,\n    usernameInputPlaceholder: i18n.str(usernameInputPlaceholderKey),\n    usernameStyle: usernameStyle\n  });\n\n  var ssoNotice = sso && _react2.default.createElement(_single_sign_on_notice2.default, null, i18n.str('ssoEnabled'));\n\n  var separator = social && login && _react2.default.createElement(_pane_separator2.default, null);\n\n  return _react2.default.createElement('div', null, ssoNotice, tabs, _react2.default.createElement('div', null, social, separator, login));\n};\n\nvar Login = function (_Screen) {\n  _inherits(Login, _Screen);\n\n  function Login() {\n    _classCallCheck(this, Login);\n\n    return _possibleConstructorReturn(this, _Screen.call(this, 'main.login'));\n  }\n\n  Login.prototype.renderAuxiliaryPane = function renderAuxiliaryPane(lock) {\n    return (0, _signed_in_confirmation.renderSignedInConfirmation)(lock);\n  };\n\n  Login.prototype.renderTabs = function renderTabs(model) {\n    return shouldRenderTabs(model);\n  };\n\n  Login.prototype.submitButtonLabel = function submitButtonLabel(m) {\n    return i18n.str(m, ['loginSubmitLabel']);\n  };\n\n  Login.prototype.isSubmitDisabled = function isSubmitDisabled(m) {\n    // it should disable the submit button if there is any connection that\n    // requires username/password and there is no enterprise with domain\n    // that matches with the email domain entered for HRD\n    return !l.hasSomeConnections(m, 'database') && // no database connection\n    !(0, _enterprise.findADConnectionWithoutDomain)(m) && // no enterprise without domain\n    !(0, _classic.isSSOEnabled)(m); // no matching domain\n  };\n\n  Login.prototype.submitHandler = function submitHandler(model) {\n    if ((0, _classic.hasOnlyClassicConnections)(model, 'social')) {\n      return null;\n    }\n\n    if ((0, _enterprise.isHRDDomain)(model, (0, _index.databaseUsernameValue)(model))) {\n      return function (id) {\n        return (0, _actions2.startHRD)(id, (0, _index.databaseUsernameValue)(model));\n      };\n    }\n\n    var useDatabaseConnection = !(0, _classic.isSSOEnabled)(model) && (0, _index.databaseConnection)(model) && ((0, _index.defaultDatabaseConnection)(model) || !(0, _enterprise.defaultEnterpriseConnection)(model));\n    return useDatabaseConnection ? _actions.logIn : _actions2.logIn;\n  };\n\n  Login.prototype.render = function render() {\n    return Component;\n  };\n\n  return Login;\n}(_screen2.default);\n\nexports.default = Login;","map":{"version":3,"sources":["/Users/jacksonmccomas/Documents/Lambda/labs/startup-grant-database-fe/grantly/node_modules/auth0-lock/lib/engine/classic/login.js"],"names":["exports","__esModule","_react","require","_react2","_interopRequireDefault","_screen","_screen2","_social_buttons_pane","_social_buttons_pane2","_login_pane","_login_pane2","_pane_separator","_pane_separator2","_index","_actions","_signed_in_confirmation","_login_sign_up_tabs","_login_sign_up_tabs2","_index2","l","_interopRequireWildcard","_actions2","_enterprise","_single_sign_on_notice","_single_sign_on_notice2","_classic","_i18n","i18n","obj","newObj","key","Object","prototype","hasOwnProperty","call","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","shouldRenderTabs","m","isSSOEnabled","hasSomeConnections","hasScreen","hasInitialScreen","Component","_ref","model","sso","onlySocial","hasOnlyClassicConnections","tabs","createElement","lock","loginLabel","str","signUpLink","signUpLabel","social","instructions","html","labelFn","showLoading","signUp","showPassword","findADConnectionWithoutDomain","showForgotPasswordLink","loginInstructionsKey","usernameInputPlaceholderKey","databaseUsernameStyle","countConnections","usernameStyle","login","emailInputPlaceholder","forgotPasswordAction","passwordInputPlaceholder","usernameInputPlaceholder","ssoNotice","separator","Login","_Screen","renderAuxiliaryPane","renderSignedInConfirmation","renderTabs","submitButtonLabel","isSubmitDisabled","submitHandler","isHRDDomain","databaseUsernameValue","id","startHRD","useDatabaseConnection","databaseConnection","defaultDatabaseConnection","defaultEnterpriseConnection","logIn","render"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _screen = require('../../core/screen');\n\nvar _screen2 = _interopRequireDefault(_screen);\n\nvar _social_buttons_pane = require('../../field/social/social_buttons_pane');\n\nvar _social_buttons_pane2 = _interopRequireDefault(_social_buttons_pane);\n\nvar _login_pane = require('../../connection/database/login_pane');\n\nvar _login_pane2 = _interopRequireDefault(_login_pane);\n\nvar _pane_separator = require('../../core/pane_separator');\n\nvar _pane_separator2 = _interopRequireDefault(_pane_separator);\n\nvar _index = require('../../connection/database/index');\n\nvar _actions = require('../../connection/database/actions');\n\nvar _signed_in_confirmation = require('../../core/signed_in_confirmation');\n\nvar _login_sign_up_tabs = require('../../connection/database/login_sign_up_tabs');\n\nvar _login_sign_up_tabs2 = _interopRequireDefault(_login_sign_up_tabs);\n\nvar _index2 = require('../../core/index');\n\nvar l = _interopRequireWildcard(_index2);\n\nvar _actions2 = require('../../connection/enterprise/actions');\n\nvar _enterprise = require('../../connection/enterprise');\n\nvar _single_sign_on_notice = require('../../connection/enterprise/single_sign_on_notice');\n\nvar _single_sign_on_notice2 = _interopRequireDefault(_single_sign_on_notice);\n\nvar _classic = require('../classic');\n\nvar _i18n = require('../../i18n');\n\nvar i18n = _interopRequireWildcard(_i18n);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction shouldRenderTabs(m) {\n  if ((0, _classic.isSSOEnabled)(m)) return false;\n  if (l.hasSomeConnections(m, 'database')) return (0, _index.hasScreen)(m, 'signUp');\n  if (l.hasSomeConnections(m, 'social') && (0, _index.hasInitialScreen)(m, 'signUp')) return (0, _index.hasScreen)(m, 'signUp');\n}\n\nvar Component = function Component(_ref) {\n  var i18n = _ref.i18n,\n      model = _ref.model;\n\n  var sso = (0, _classic.isSSOEnabled)(model);\n  var onlySocial = (0, _classic.hasOnlyClassicConnections)(model, 'social');\n\n  var tabs = shouldRenderTabs(model) && _react2.default.createElement(_login_sign_up_tabs2.default, {\n    key: 'loginsignup',\n    lock: model,\n    loginLabel: i18n.str('loginLabel'),\n    signUpLink: (0, _index.signUpLink)(model),\n    signUpLabel: i18n.str('signUpLabel')\n  });\n\n  var social = l.hasSomeConnections(model, 'social') && _react2.default.createElement(_social_buttons_pane2.default, {\n    instructions: i18n.html('socialLoginInstructions'),\n    labelFn: i18n.str,\n    lock: model,\n    showLoading: onlySocial,\n    signUp: false\n  });\n\n  var showPassword = !sso && (l.hasSomeConnections(model, 'database') || !!(0, _enterprise.findADConnectionWithoutDomain)(model));\n\n  var showForgotPasswordLink = showPassword && l.hasSomeConnections(model, 'database');\n\n  var loginInstructionsKey = social ? 'databaseEnterpriseAlternativeLoginInstructions' : 'databaseEnterpriseLoginInstructions';\n\n  var usernameInputPlaceholderKey = (0, _index.databaseUsernameStyle)(model) === 'any' || l.countConnections(model, 'enterprise') > 1 ? 'usernameOrEmailInputPlaceholder' : 'usernameInputPlaceholder';\n\n  var usernameStyle = (0, _index.databaseUsernameStyle)(model);\n\n  var login = (sso || l.hasSomeConnections(model, 'database') || l.hasSomeConnections(model, 'enterprise')) && _react2.default.createElement(_login_pane2.default, {\n    emailInputPlaceholder: i18n.str('emailInputPlaceholder'),\n    forgotPasswordAction: i18n.str('forgotPasswordAction'),\n    i18n: i18n,\n    instructions: i18n.html(loginInstructionsKey),\n    lock: model,\n    passwordInputPlaceholder: i18n.str('passwordInputPlaceholder'),\n    showForgotPasswordLink: showForgotPasswordLink,\n    showPassword: showPassword,\n    usernameInputPlaceholder: i18n.str(usernameInputPlaceholderKey),\n    usernameStyle: usernameStyle\n  });\n\n  var ssoNotice = sso && _react2.default.createElement(\n    _single_sign_on_notice2.default,\n    null,\n    i18n.str('ssoEnabled')\n  );\n\n  var separator = social && login && _react2.default.createElement(_pane_separator2.default, null);\n\n  return _react2.default.createElement(\n    'div',\n    null,\n    ssoNotice,\n    tabs,\n    _react2.default.createElement(\n      'div',\n      null,\n      social,\n      separator,\n      login\n    )\n  );\n};\n\nvar Login = function (_Screen) {\n  _inherits(Login, _Screen);\n\n  function Login() {\n    _classCallCheck(this, Login);\n\n    return _possibleConstructorReturn(this, _Screen.call(this, 'main.login'));\n  }\n\n  Login.prototype.renderAuxiliaryPane = function renderAuxiliaryPane(lock) {\n    return (0, _signed_in_confirmation.renderSignedInConfirmation)(lock);\n  };\n\n  Login.prototype.renderTabs = function renderTabs(model) {\n    return shouldRenderTabs(model);\n  };\n\n  Login.prototype.submitButtonLabel = function submitButtonLabel(m) {\n    return i18n.str(m, ['loginSubmitLabel']);\n  };\n\n  Login.prototype.isSubmitDisabled = function isSubmitDisabled(m) {\n    // it should disable the submit button if there is any connection that\n    // requires username/password and there is no enterprise with domain\n    // that matches with the email domain entered for HRD\n    return !l.hasSomeConnections(m, 'database') && // no database connection\n    !(0, _enterprise.findADConnectionWithoutDomain)(m) && // no enterprise without domain\n    !(0, _classic.isSSOEnabled)(m); // no matching domain\n  };\n\n  Login.prototype.submitHandler = function submitHandler(model) {\n    if ((0, _classic.hasOnlyClassicConnections)(model, 'social')) {\n      return null;\n    }\n\n    if ((0, _enterprise.isHRDDomain)(model, (0, _index.databaseUsernameValue)(model))) {\n      return function (id) {\n        return (0, _actions2.startHRD)(id, (0, _index.databaseUsernameValue)(model));\n      };\n    }\n\n    var useDatabaseConnection = !(0, _classic.isSSOEnabled)(model) && (0, _index.databaseConnection)(model) && ((0, _index.defaultDatabaseConnection)(model) || !(0, _enterprise.defaultEnterpriseConnection)(model));\n\n    return useDatabaseConnection ? _actions.logIn : _actions2.logIn;\n  };\n\n  Login.prototype.render = function render() {\n    return Component;\n  };\n\n  return Login;\n}(_screen2.default);\n\nexports.default = Login;\n"]},"metadata":{},"sourceType":"script"}