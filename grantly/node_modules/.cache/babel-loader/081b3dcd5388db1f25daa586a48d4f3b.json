{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _auth0Js = require('auth0-js');\n\nvar _auth0Js2 = _interopRequireDefault(_auth0Js);\n\nvar _qs = require('qs');\n\nvar _qs2 = _interopRequireDefault(_qs);\n\nvar _cordovaAuth0PluginMin = require('auth0-js/dist/cordova-auth0-plugin.min.js');\n\nvar _cordovaAuth0PluginMin2 = _interopRequireDefault(_cordovaAuth0PluginMin);\n\nvar _helper = require('./helper');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar Auth0APIClient = function () {\n  function Auth0APIClient(lockID, clientID, domain, opts) {\n    _classCallCheck(this, Auth0APIClient);\n\n    this.lockID = lockID;\n    this.client = null;\n    this.authOpt = null;\n    this.domain = domain;\n    this.isUniversalLogin = window.location.host === domain;\n    this._enableIdPInitiatedLogin = !!(opts._enableIdPInitiatedLogin || opts._enableImpersonation);\n    var telemetry = this.getTelemetryInfo(opts._telemetryInfo);\n    var state = opts.state;\n\n    if (opts.params && opts.params.state) {\n      state = opts.params.state;\n    }\n\n    var nonce = opts.nonce;\n\n    if (opts.params && opts.params.nonce) {\n      nonce = opts.params.nonce;\n    }\n\n    var scope = opts.params && opts.params.scope;\n    this.client = new _auth0Js2.default.WebAuth({\n      clientID: clientID,\n      domain: domain,\n      audience: opts.audience,\n      redirectUri: opts.redirectUrl,\n      responseMode: opts.responseMode,\n      responseType: opts.responseType,\n      leeway: opts.leeway || 60,\n      plugins: opts.plugins || [new _cordovaAuth0PluginMin2.default()],\n      overrides: (0, _helper.webAuthOverrides)(opts.overrides),\n      _sendTelemetry: opts._sendTelemetry === false ? false : true,\n      _telemetryInfo: telemetry,\n      state: state,\n      nonce: nonce,\n      scope: scope\n    });\n    this.authOpt = {\n      popup: !opts.redirect,\n      popupOptions: opts.popupOptions,\n      nonce: nonce,\n      state: state,\n      scope: scope\n    };\n\n    if (this.isUniversalLogin && opts.sso !== undefined) {\n      this.authOpt.sso = opts.sso;\n    }\n  }\n\n  Auth0APIClient.prototype.getTelemetryInfo = function getTelemetryInfo(telemetryOverride) {\n    var telemetry = void 0;\n\n    var _qs$parse = _qs2.default.parse(window.location.search.substr(1)),\n        auth0Client = _qs$parse.auth0Client;\n\n    var ulpTelemetry = auth0Client && JSON.parse(atob(auth0Client));\n\n    if (this.isUniversalLogin && ulpTelemetry) {\n      var _extends2;\n\n      telemetry = _extends({}, ulpTelemetry, {\n        env: _extends({}, ulpTelemetry.env, (_extends2 = {}, _extends2['lock.js-ulp'] = (0, _helper.getVersion)(), _extends2['auth0.js-ulp'] = _auth0Js2.default.version.raw, _extends2))\n      });\n    }\n\n    if (this.isUniversalLogin && !ulpTelemetry) {\n      var _env;\n\n      telemetry = {\n        name: 'lock.js-ulp',\n        version: (0, _helper.getVersion)(),\n        env: (_env = {}, _env['auth0.js-ulp'] = _auth0Js2.default.version.raw, _env)\n      };\n    }\n\n    if (!this.isUniversalLogin && telemetryOverride) {\n      var _extends3;\n\n      telemetry = _extends({}, telemetryOverride, {\n        env: _extends({}, telemetryOverride.env, (_extends3 = {}, _extends3['lock.js'] = (0, _helper.getVersion)(), _extends3['auth0.js'] = _auth0Js2.default.version.raw, _extends3))\n      });\n    }\n\n    if (!telemetry) {\n      var _env2;\n\n      telemetry = {\n        name: 'lock.js',\n        version: (0, _helper.getVersion)(),\n        env: (_env2 = {}, _env2['auth0.js'] = _auth0Js2.default.version.raw, _env2)\n      };\n    }\n\n    return telemetry;\n  };\n\n  Auth0APIClient.prototype.logIn = function logIn(options, authParams, cb) {\n    // TODO: for passwordless only, try to clean in auth0.js\n    // client._shouldRedirect = redirect || responseType === \"code\" || !!redirectUrl;\n    var f = (0, _helper.loginCallback)(false, this.domain, cb);\n    var loginOptions = (0, _helper.trimAuthParams)((0, _helper.normalizeAuthParams)(_extends({}, options, this.authOpt, authParams)));\n\n    if (options.login_hint) {\n      loginOptions.login_hint = options.login_hint;\n    }\n\n    if (!options.username && !options.email) {\n      if (this.authOpt.popup) {\n        this.client.popup.authorize(_extends({}, loginOptions, {\n          owp: true\n        }), f);\n      } else {\n        this.client.authorize(loginOptions, f);\n      }\n    } else if (this.authOpt.popup) {\n      this.client.popup.loginWithCredentials(loginOptions, f);\n    } else {\n      loginOptions.realm = options.connection;\n      this.client.login(loginOptions, f);\n    }\n  };\n\n  Auth0APIClient.prototype.logout = function logout(query) {\n    this.client.logout(query);\n  };\n\n  Auth0APIClient.prototype.signUp = function signUp(options, cb) {\n    delete options.autoLogin;\n    this.client.signup((0, _helper.trimAuthParams)(options), function (err, result) {\n      return cb(err, result);\n    });\n  };\n\n  Auth0APIClient.prototype.resetPassword = function resetPassword(options, cb) {\n    this.client.changePassword((0, _helper.trimAuthParams)(options), cb);\n  };\n\n  Auth0APIClient.prototype.passwordlessStart = function passwordlessStart(options, cb) {\n    this.client.passwordlessStart((0, _helper.trimAuthParams)(options), function (err) {\n      return cb((0, _helper.normalizeError)(err));\n    });\n  };\n\n  Auth0APIClient.prototype.passwordlessVerify = function passwordlessVerify(options, cb) {\n    var verifyOptions = _extends({}, options, {\n      popup: this.authOpt.popup\n    });\n\n    this.client.passwordlessLogin(verifyOptions, function (err, result) {\n      return cb((0, _helper.normalizeError)(err), result);\n    });\n  };\n\n  Auth0APIClient.prototype.parseHash = function parseHash() {\n    var hash = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var cb = arguments[1];\n    return this.client.parseHash({\n      __enableIdPInitiatedLogin: this._enableIdPInitiatedLogin,\n      hash: hash,\n      nonce: this.authOpt.nonce,\n      state: this.authOpt.state\n    }, cb);\n  };\n\n  Auth0APIClient.prototype.getUserInfo = function getUserInfo(token, callback) {\n    return this.client.client.userInfo(token, callback);\n  };\n\n  Auth0APIClient.prototype.getProfile = function getProfile(token, callback) {\n    this.getUserInfo(token, callback);\n  };\n\n  Auth0APIClient.prototype.getSSOData = function getSSOData() {\n    var _client$client;\n\n    return (_client$client = this.client.client).getSSOData.apply(_client$client, arguments);\n  };\n\n  Auth0APIClient.prototype.getChallenge = function getChallenge() {\n    var _client$client2;\n\n    return (_client$client2 = this.client.client).getChallenge.apply(_client$client2, arguments);\n  };\n\n  Auth0APIClient.prototype.getUserCountry = function getUserCountry(cb) {\n    return this.client.client.getUserCountry(cb);\n  };\n\n  Auth0APIClient.prototype.checkSession = function checkSession(options, cb) {\n    return this.client.checkSession(options, cb);\n  };\n\n  return Auth0APIClient;\n}();\n\nexports.default = Auth0APIClient;","map":{"version":3,"sources":["/Users/jacksonmccomas/Documents/Lambda/labs/startup-grant-database-fe/grantly/node_modules/auth0-lock/lib/core/web_api/p2_api.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_auth0Js","require","_auth0Js2","_interopRequireDefault","_qs","_qs2","_cordovaAuth0PluginMin","_cordovaAuth0PluginMin2","_helper","obj","default","_classCallCheck","instance","Constructor","TypeError","Auth0APIClient","lockID","clientID","domain","opts","client","authOpt","isUniversalLogin","window","location","host","_enableIdPInitiatedLogin","_enableImpersonation","telemetry","getTelemetryInfo","_telemetryInfo","state","params","nonce","scope","WebAuth","audience","redirectUri","redirectUrl","responseMode","responseType","leeway","plugins","overrides","webAuthOverrides","_sendTelemetry","popup","redirect","popupOptions","sso","undefined","telemetryOverride","_qs$parse","parse","search","substr","auth0Client","ulpTelemetry","JSON","atob","_extends2","env","getVersion","version","raw","_env","name","_extends3","_env2","logIn","options","authParams","cb","f","loginCallback","loginOptions","trimAuthParams","normalizeAuthParams","login_hint","username","email","authorize","owp","loginWithCredentials","realm","connection","login","logout","query","signUp","autoLogin","signup","err","result","resetPassword","changePassword","passwordlessStart","normalizeError","passwordlessVerify","verifyOptions","passwordlessLogin","parseHash","hash","__enableIdPInitiatedLogin","getUserInfo","token","callback","userInfo","getProfile","getSSOData","_client$client","apply","getChallenge","_client$client2","getUserCountry","checkSession"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _auth0Js = require('auth0-js');\n\nvar _auth0Js2 = _interopRequireDefault(_auth0Js);\n\nvar _qs = require('qs');\n\nvar _qs2 = _interopRequireDefault(_qs);\n\nvar _cordovaAuth0PluginMin = require('auth0-js/dist/cordova-auth0-plugin.min.js');\n\nvar _cordovaAuth0PluginMin2 = _interopRequireDefault(_cordovaAuth0PluginMin);\n\nvar _helper = require('./helper');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Auth0APIClient = function () {\n  function Auth0APIClient(lockID, clientID, domain, opts) {\n    _classCallCheck(this, Auth0APIClient);\n\n    this.lockID = lockID;\n    this.client = null;\n    this.authOpt = null;\n    this.domain = domain;\n    this.isUniversalLogin = window.location.host === domain;\n    this._enableIdPInitiatedLogin = !!(opts._enableIdPInitiatedLogin || opts._enableImpersonation);\n    var telemetry = this.getTelemetryInfo(opts._telemetryInfo);\n\n    var state = opts.state;\n    if (opts.params && opts.params.state) {\n      state = opts.params.state;\n    }\n\n    var nonce = opts.nonce;\n    if (opts.params && opts.params.nonce) {\n      nonce = opts.params.nonce;\n    }\n\n    var scope = opts.params && opts.params.scope;\n\n    this.client = new _auth0Js2.default.WebAuth({\n      clientID: clientID,\n      domain: domain,\n      audience: opts.audience,\n      redirectUri: opts.redirectUrl,\n      responseMode: opts.responseMode,\n      responseType: opts.responseType,\n      leeway: opts.leeway || 60,\n      plugins: opts.plugins || [new _cordovaAuth0PluginMin2.default()],\n      overrides: (0, _helper.webAuthOverrides)(opts.overrides),\n      _sendTelemetry: opts._sendTelemetry === false ? false : true,\n      _telemetryInfo: telemetry,\n      state: state,\n      nonce: nonce,\n      scope: scope\n    });\n\n    this.authOpt = {\n      popup: !opts.redirect,\n      popupOptions: opts.popupOptions,\n      nonce: nonce,\n      state: state,\n      scope: scope\n    };\n    if (this.isUniversalLogin && opts.sso !== undefined) {\n      this.authOpt.sso = opts.sso;\n    }\n  }\n\n  Auth0APIClient.prototype.getTelemetryInfo = function getTelemetryInfo(telemetryOverride) {\n    var telemetry = void 0;\n\n    var _qs$parse = _qs2.default.parse(window.location.search.substr(1)),\n        auth0Client = _qs$parse.auth0Client;\n\n    var ulpTelemetry = auth0Client && JSON.parse(atob(auth0Client));\n    if (this.isUniversalLogin && ulpTelemetry) {\n      var _extends2;\n\n      telemetry = _extends({}, ulpTelemetry, {\n        env: _extends({}, ulpTelemetry.env, (_extends2 = {}, _extends2['lock.js-ulp'] = (0, _helper.getVersion)(), _extends2['auth0.js-ulp'] = _auth0Js2.default.version.raw, _extends2))\n      });\n    }\n    if (this.isUniversalLogin && !ulpTelemetry) {\n      var _env;\n\n      telemetry = {\n        name: 'lock.js-ulp',\n        version: (0, _helper.getVersion)(),\n        env: (_env = {}, _env['auth0.js-ulp'] = _auth0Js2.default.version.raw, _env)\n      };\n    }\n    if (!this.isUniversalLogin && telemetryOverride) {\n      var _extends3;\n\n      telemetry = _extends({}, telemetryOverride, {\n        env: _extends({}, telemetryOverride.env, (_extends3 = {}, _extends3['lock.js'] = (0, _helper.getVersion)(), _extends3['auth0.js'] = _auth0Js2.default.version.raw, _extends3))\n      });\n    }\n    if (!telemetry) {\n      var _env2;\n\n      telemetry = {\n        name: 'lock.js',\n        version: (0, _helper.getVersion)(),\n        env: (_env2 = {}, _env2['auth0.js'] = _auth0Js2.default.version.raw, _env2)\n      };\n    }\n    return telemetry;\n  };\n\n  Auth0APIClient.prototype.logIn = function logIn(options, authParams, cb) {\n    // TODO: for passwordless only, try to clean in auth0.js\n    // client._shouldRedirect = redirect || responseType === \"code\" || !!redirectUrl;\n    var f = (0, _helper.loginCallback)(false, this.domain, cb);\n    var loginOptions = (0, _helper.trimAuthParams)((0, _helper.normalizeAuthParams)(_extends({}, options, this.authOpt, authParams)));\n\n    if (options.login_hint) {\n      loginOptions.login_hint = options.login_hint;\n    }\n\n    if (!options.username && !options.email) {\n      if (this.authOpt.popup) {\n        this.client.popup.authorize(_extends({}, loginOptions, {\n          owp: true\n        }), f);\n      } else {\n        this.client.authorize(loginOptions, f);\n      }\n    } else if (this.authOpt.popup) {\n      this.client.popup.loginWithCredentials(loginOptions, f);\n    } else {\n      loginOptions.realm = options.connection;\n      this.client.login(loginOptions, f);\n    }\n  };\n\n  Auth0APIClient.prototype.logout = function logout(query) {\n    this.client.logout(query);\n  };\n\n  Auth0APIClient.prototype.signUp = function signUp(options, cb) {\n    delete options.autoLogin;\n    this.client.signup((0, _helper.trimAuthParams)(options), function (err, result) {\n      return cb(err, result);\n    });\n  };\n\n  Auth0APIClient.prototype.resetPassword = function resetPassword(options, cb) {\n    this.client.changePassword((0, _helper.trimAuthParams)(options), cb);\n  };\n\n  Auth0APIClient.prototype.passwordlessStart = function passwordlessStart(options, cb) {\n    this.client.passwordlessStart((0, _helper.trimAuthParams)(options), function (err) {\n      return cb((0, _helper.normalizeError)(err));\n    });\n  };\n\n  Auth0APIClient.prototype.passwordlessVerify = function passwordlessVerify(options, cb) {\n    var verifyOptions = _extends({}, options, {\n      popup: this.authOpt.popup\n    });\n    this.client.passwordlessLogin(verifyOptions, function (err, result) {\n      return cb((0, _helper.normalizeError)(err), result);\n    });\n  };\n\n  Auth0APIClient.prototype.parseHash = function parseHash() {\n    var hash = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var cb = arguments[1];\n\n    return this.client.parseHash({\n      __enableIdPInitiatedLogin: this._enableIdPInitiatedLogin,\n      hash: hash,\n      nonce: this.authOpt.nonce,\n      state: this.authOpt.state\n    }, cb);\n  };\n\n  Auth0APIClient.prototype.getUserInfo = function getUserInfo(token, callback) {\n    return this.client.client.userInfo(token, callback);\n  };\n\n  Auth0APIClient.prototype.getProfile = function getProfile(token, callback) {\n    this.getUserInfo(token, callback);\n  };\n\n  Auth0APIClient.prototype.getSSOData = function getSSOData() {\n    var _client$client;\n\n    return (_client$client = this.client.client).getSSOData.apply(_client$client, arguments);\n  };\n\n  Auth0APIClient.prototype.getChallenge = function getChallenge() {\n    var _client$client2;\n\n    return (_client$client2 = this.client.client).getChallenge.apply(_client$client2, arguments);\n  };\n\n  Auth0APIClient.prototype.getUserCountry = function getUserCountry(cb) {\n    return this.client.client.getUserCountry(cb);\n  };\n\n  Auth0APIClient.prototype.checkSession = function checkSession(options, cb) {\n    return this.client.checkSession(options, cb);\n  };\n\n  return Auth0APIClient;\n}();\n\nexports.default = Auth0APIClient;\n"]},"metadata":{},"sourceType":"script"}