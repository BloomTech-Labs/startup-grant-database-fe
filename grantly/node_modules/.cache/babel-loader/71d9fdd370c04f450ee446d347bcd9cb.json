{"ast":null,"code":"var _jsxFileName = \"/Users/jacksonmccomas/Documents/Lambda/labs/startup-grant-database-fe/grantly/src/components/admin/GrantTable.jsx\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { ActionsContext } from \"../../context/ActionsContext\";\nimport { useSelector } from \"react-redux\";\nimport MaterialTable, { FilterRow } from \"material-table\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport moment from \"moment\"; // Styling\n\nimport TextField from \"@material-ui/core/TextField\";\nimport Paper from \"@material-ui/core/Paper\"; // Components\n\nimport { tableValues } from \"./values/GrantTableValues\";\nimport { EditGrantFunctions } from \"./values/EditGrantFunctions\";\nimport EditForm from \"./EditGrantForm\";\nimport SuggestionForm from \"./SuggestionModal\";\nconst grantTableStyles = makeStyles(theme => ({\n  displayNone: {\n    color: \"#EF7B5C\",\n    fontSize: 40\n  },\n  paper: {\n    margin: \".5em\"\n  },\n  headerStyle: {\n    fontFamily: \"Nunito Sans\",\n    fontSize: \"1em\"\n  }\n}));\nconst tableStyles = {\n  headerStyle: {\n    fontFamily: \"Nunito Sans\",\n    fontSize: \"1em\",\n    color: \"#3A3A3A\",\n    padding: \"1em\",\n    fontWeight: 700,\n    backgroundColor: \"#83D7D1\"\n  }\n};\n\nconst GrantTable = props => {\n  const actions = useContext(ActionsContext);\n  const {\n    token,\n    isModerator,\n    currentUser\n  } = useSelector(state => state.user);\n  const {\n    grants\n  } = useSelector(state => state.grants);\n  const style = grantTableStyles();\n  console.log(\"moderator?\", isModerator);\n  useEffect(() => {\n    if (isAuthenticated && currentUser[\"https://founder-grants.com/appdata\"]) {\n      if (currentUser[\"https://founder-grants.com/appdata\"].authorization.roles.find(() => \"Moderator\") === \"Moderator\") {\n        actions.user.isModerator();\n      }\n    }\n  }, [currentUser]);\n  useEffect(() => {\n    isModerator && actions.grants.fetchAdminGrants(token);\n  }, [isModerator]);\n  console.log(\"admin grants\", grants);\n  console.log(\"props\", props);\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    className: style.paper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(MaterialTable, {\n    title: tableValues.title,\n    columns: tableValues.columns,\n    options: tableStyles,\n    data: grants,\n    editable: {\n      onRowAdd: newData => new Promise(resolve => {\n        setTimeout(() => {\n          resolve();\n          let filteredData = Object.assign({}, newData);\n          delete filteredData.requests;\n          props.postGrants(filteredData, props.currentUser.token);\n        }, 600);\n      }),\n      onRowUpdate: (newData, oldData) => new Promise(resolve => {\n        setTimeout(() => {\n          resolve();\n\n          if (oldData) {\n            let filteredData = Object.assign({}, newData);\n            delete filteredData.requests;\n            props.putGrants({ ...filteredData,\n              details_last_updated: moment().format(\"YYYY-MM-DD\")\n            }, props.currentUser.token);\n          }\n        }, 600);\n      }),\n      onRowDelete: oldData => new Promise(resolve => {\n        setTimeout(() => {\n          resolve();\n\n          if (oldData) {\n            delete oldData.requests;\n            props.deleteGrants(oldData.id, props.currentUser.token);\n          }\n        }, 600);\n      })\n    },\n    zeroMinWidth: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  })));\n};\n\nexport default GrantTable;","map":{"version":3,"sources":["/Users/jacksonmccomas/Documents/Lambda/labs/startup-grant-database-fe/grantly/src/components/admin/GrantTable.jsx"],"names":["React","useContext","useEffect","useState","ActionsContext","useSelector","MaterialTable","FilterRow","makeStyles","moment","TextField","Paper","tableValues","EditGrantFunctions","EditForm","SuggestionForm","grantTableStyles","theme","displayNone","color","fontSize","paper","margin","headerStyle","fontFamily","tableStyles","padding","fontWeight","backgroundColor","GrantTable","props","actions","token","isModerator","currentUser","state","user","grants","style","console","log","isAuthenticated","authorization","roles","find","fetchAdminGrants","title","columns","onRowAdd","newData","Promise","resolve","setTimeout","filteredData","Object","assign","requests","postGrants","onRowUpdate","oldData","putGrants","details_last_updated","format","onRowDelete","deleteGrants","id"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport { ActionsContext } from \"../../context/ActionsContext\";\nimport { useSelector } from \"react-redux\";\nimport MaterialTable, { FilterRow } from \"material-table\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport moment from \"moment\";\n\n// Styling\nimport TextField from \"@material-ui/core/TextField\";\nimport Paper from \"@material-ui/core/Paper\";\n// Components\nimport { tableValues } from \"./values/GrantTableValues\";\nimport { EditGrantFunctions } from \"./values/EditGrantFunctions\";\nimport EditForm from \"./EditGrantForm\";\nimport SuggestionForm from \"./SuggestionModal\";\n\nconst grantTableStyles = makeStyles(theme => ({\n  displayNone: {\n    color: \"#EF7B5C\",\n    fontSize: 40\n  },\n  paper: {\n    margin: \".5em\"\n  },\n  headerStyle: {\n    fontFamily: \"Nunito Sans\",\n    fontSize: \"1em\"\n  }\n}));\n\nconst tableStyles = {\n  headerStyle: {\n    fontFamily: \"Nunito Sans\",\n    fontSize: \"1em\",\n    color: \"#3A3A3A\",\n    padding: \"1em\",\n    fontWeight: 700,\n    backgroundColor: \"#83D7D1\"\n  }\n};\n\nconst GrantTable = props => {\n  const actions = useContext(ActionsContext);\n  const { token, isModerator, currentUser } = useSelector(state => state.user);\n  const { grants } = useSelector(state => state.grants);\n\n  const style = grantTableStyles();\n  console.log(\"moderator?\", isModerator);\n\n  useEffect(() => {\n    if (isAuthenticated && currentUser[\"https://founder-grants.com/appdata\"]) {\n      if (\n        currentUser[\n          \"https://founder-grants.com/appdata\"\n        ].authorization.roles.find(() => \"Moderator\") === \"Moderator\"\n      ) {\n        actions.user.isModerator();\n      }\n    }\n  }, [currentUser]);\n\n  useEffect(() => {\n    isModerator && actions.grants.fetchAdminGrants(token);\n  }, [isModerator]);\n\n  console.log(\"admin grants\", grants);\n  console.log(\"props\", props);\n\n  return (\n    <React.Fragment>\n      <Paper className={style.paper}>\n        <MaterialTable\n          title={tableValues.title}\n          columns={tableValues.columns}\n          options={tableStyles}\n          data={grants}\n          editable={{\n            onRowAdd: newData =>\n              new Promise(resolve => {\n                setTimeout(() => {\n                  resolve();\n                  let filteredData = Object.assign({}, newData);\n                  delete filteredData.requests;\n                  props.postGrants(filteredData, props.currentUser.token);\n                }, 600);\n              }),\n            onRowUpdate: (newData, oldData) =>\n              new Promise(resolve => {\n                setTimeout(() => {\n                  resolve();\n                  if (oldData) {\n                    let filteredData = Object.assign({}, newData);\n                    delete filteredData.requests;\n                    props.putGrants(\n                      {\n                        ...filteredData,\n                        details_last_updated: moment().format(\"YYYY-MM-DD\")\n                      },\n                      props.currentUser.token\n                    );\n                  }\n                }, 600);\n              }),\n            onRowDelete: oldData =>\n              new Promise(resolve => {\n                setTimeout(() => {\n                  resolve();\n                  if (oldData) {\n                    delete oldData.requests;\n                    props.deleteGrants(oldData.id, props.currentUser.token);\n                  }\n                }, 600);\n              })\n          }}\n          zeroMinWidth\n        />\n      </Paper>\n    </React.Fragment>\n  );\n};\n\nexport default GrantTable;\n"]},"metadata":{},"sourceType":"module"}