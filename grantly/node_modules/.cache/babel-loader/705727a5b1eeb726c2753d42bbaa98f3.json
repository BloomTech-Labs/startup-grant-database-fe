{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _button = require('./box/button');\n\nvar _text_input = require('./input/text_input');\n\nvar _text_input2 = _interopRequireDefault(_text_input);\n\nvar _media_utils = require('../utils/media_utils');\n\nvar _string_utils = require('../utils/string_utils');\n\nvar su = _interopRequireWildcard(_string_utils);\n\nvar _index = require('../core/index');\n\nvar l = _interopRequireWildcard(_index);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar cycle = function cycle(xs, x) {\n  return xs.skipWhile(function (y) {\n    return y !== x;\n  }).get(1, xs.get(0));\n};\n\nvar FiltrableList = function (_React$Component) {\n  _inherits(FiltrableList, _React$Component);\n\n  function FiltrableList(props) {\n    _classCallCheck(this, FiltrableList);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _this.state = {\n      filteredItems: props.items,\n      highlighted: props.defaultItem\n    };\n    return _this;\n  }\n\n  FiltrableList.prototype.filter = function filter(str) {\n    var filteredItems = this.props.items.filter(function (x) {\n      return su.matches(str, x.get('label'));\n    });\n    var highlighted = filteredItems.size === 1 && filteredItems.get(0) || filteredItems.includes(this.state.highlighted) && this.state.highlighted || null;\n    return {\n      filteredItems: filteredItems,\n      highlighted: highlighted\n    };\n  };\n\n  FiltrableList.prototype.select = function select(x) {\n    this.props.onSelect(x);\n  };\n\n  FiltrableList.prototype.handleChange = function handleChange(e) {\n    this.setState(this.filter(e.target.value));\n  };\n\n  FiltrableList.prototype.handleKeyDown = function handleKeyDown(e) {\n    var _state = this.state,\n        filteredItems = _state.filteredItems,\n        highlighted = _state.highlighted;\n\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        this.setState({\n          highlighted: cycle(filteredItems, highlighted)\n        });\n        break;\n\n      case 'ArrowUp':\n        e.preventDefault();\n        this.setState({\n          highlighted: cycle(filteredItems.reverse(), highlighted)\n        });\n        break;\n\n      case 'Enter':\n        e.preventDefault();\n        highlighted && this.select(highlighted);\n        break;\n\n      case 'Escape':\n        e.preventDefault();\n        this.props.onCancel();\n\n      default: // no-op\n\n    }\n  };\n\n  FiltrableList.prototype.render = function render() {\n    var _this2 = this;\n\n    var _props = this.props,\n        icon = _props.icon,\n        iconUrl = _props.iconUrl,\n        onCancel = _props.onCancel,\n        model = _props.model;\n    return _react2.default.createElement('div', {\n      className: 'auth0-lock-select-country'\n    }, _react2.default.createElement('div', {\n      className: 'auth0-lock-search'\n    }, _react2.default.createElement(_button.BackButton, {\n      lockId: l.id(model),\n      onClick: onCancel\n    }), _react2.default.createElement(_text_input2.default, {\n      lockId: l.id(model),\n      name: 'search',\n      icon: icon,\n      iconUrl: iconUrl,\n      isValid: true,\n      onChange: this.handleChange.bind(this),\n      onKeyDown: this.handleKeyDown.bind(this)\n    })), _react2.default.createElement(List, {\n      highlighted: this.state.highlighted,\n      items: this.state.filteredItems,\n      onClick: this.select.bind(this),\n      onMouseMove: function onMouseMove(x) {\n        return _this2.setState({\n          highlighted: x\n        });\n      }\n    }));\n  };\n\n  return FiltrableList;\n}(_react2.default.Component);\n\nexports.default = FiltrableList;\n\nvar List = function (_React$Component2) {\n  _inherits(List, _React$Component2);\n\n  function List() {\n    _classCallCheck(this, List);\n\n    return _possibleConstructorReturn(this, _React$Component2.apply(this, arguments));\n  }\n\n  List.prototype.componentDidUpdate = function componentDidUpdate() {\n    var _this4 = this; // Ensure that highlighted item is entirely visible\n    // NOTE: I've spent very little time on this. It works, but it\n    // surely can be more clearly.\n\n\n    var highlighted = this.refs.highlighted;\n\n    if (highlighted) {\n      var scrollableNode = _reactDom2.default.findDOMNode(this);\n\n      var highlightedNode = _reactDom2.default.findDOMNode(highlighted);\n\n      var relativeOffsetTop = highlightedNode.offsetTop - scrollableNode.scrollTop;\n      var scrollTopDelta = 0;\n\n      if (relativeOffsetTop + highlightedNode.offsetHeight > scrollableNode.clientHeight) {\n        scrollTopDelta = relativeOffsetTop + highlightedNode.offsetHeight - scrollableNode.clientHeight;\n      } else if (relativeOffsetTop < 0) {\n        scrollTopDelta = relativeOffsetTop;\n      }\n\n      if (scrollTopDelta) {\n        this.preventHighlight = true;\n        scrollableNode.scrollTop += scrollTopDelta;\n        if (this.timeout) clearTimeout(this.timeout);\n        this.timeout = setTimeout(function () {\n          return _this4.preventHighlight = false;\n        }, 100);\n      }\n    }\n  };\n\n  List.prototype.mouseMoveHandler = function mouseMoveHandler(x) {\n    // TODO: This is an ugly hack to avoid highlighting the element under the\n    // mouse when an arrow key trigger a scroll of the list (which in turn\n    // triggers a mousemove event).\n    !this.preventHighlight && this.props.onMouseMove(x);\n  };\n\n  List.prototype.mouseLeaveHandler = function mouseLeaveHandler() {// TODO: clear highlighted?\n  };\n\n  List.prototype.render = function render() {\n    var _this5 = this;\n\n    var items = this.props.items.map(function (x) {\n      var highlighted = x === _this5.props.highlighted;\n      var props = {\n        highlighted: highlighted,\n        label: x.get('label'),\n        onClick: function onClick() {\n          return _this5.props.onClick(x);\n        },\n        onMouseMove: function onMouseMove() {\n          return _this5.mouseMoveHandler(x);\n        }\n      };\n      if (highlighted) props.ref = 'highlighted';\n      return _react2.default.createElement(Item, _extends({\n        key: x.get('label')\n      }, props));\n    });\n    return _react2.default.createElement('div', {\n      className: 'auth0-lock-list-code',\n      onMouseLeave: this.mouseLeaveHandler.bind(this)\n    }, _react2.default.createElement('ul', null, items));\n  };\n\n  return List;\n}(_react2.default.Component);\n\nvar Item = function (_React$Component3) {\n  _inherits(Item, _React$Component3);\n\n  function Item() {\n    _classCallCheck(this, Item);\n\n    return _possibleConstructorReturn(this, _React$Component3.apply(this, arguments));\n  }\n\n  Item.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n    return this.props.highlighted != nextProps.highlighted;\n  };\n\n  Item.prototype.render = function render() {\n    var _props2 = this.props,\n        highlighted = _props2.highlighted,\n        label = _props2.label,\n        onClick = _props2.onClick,\n        onMouseMove = _props2.onMouseMove;\n    var className = highlighted ? 'auth0-lock-list-code-highlighted' : '';\n    return _react2.default.createElement('li', {\n      className: className,\n      onClick: onClick,\n      onMouseMove: onMouseMove\n    }, label);\n  };\n\n  return Item;\n}(_react2.default.Component);\n\nItem.propTypes = {\n  highlighted: _propTypes2.default.bool.isRequired,\n  label: _propTypes2.default.string.isRequired,\n  onClick: _propTypes2.default.func.isRequired,\n  onMouseMove: _propTypes2.default.func.isRequired\n};","map":{"version":3,"sources":["/Users/jacksonmccomas/Documents/Lambda/labs/startup-grant-database-fe/grantly/node_modules/auth0-lock/lib/ui/list.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_propTypes","require","_propTypes2","_interopRequireDefault","_react","_react2","_reactDom","_reactDom2","_button","_text_input","_text_input2","_media_utils","_string_utils","su","_interopRequireWildcard","_index","l","obj","newObj","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","cycle","xs","x","skipWhile","y","get","FiltrableList","_React$Component","props","_this","state","filteredItems","items","highlighted","defaultItem","filter","str","matches","size","includes","select","onSelect","handleChange","e","setState","handleKeyDown","_state","preventDefault","reverse","onCancel","render","_this2","_props","icon","iconUrl","model","createElement","className","BackButton","lockId","id","onClick","name","isValid","onChange","bind","onKeyDown","List","onMouseMove","Component","_React$Component2","apply","componentDidUpdate","_this4","refs","scrollableNode","findDOMNode","highlightedNode","relativeOffsetTop","offsetTop","scrollTop","scrollTopDelta","offsetHeight","clientHeight","preventHighlight","timeout","clearTimeout","setTimeout","mouseMoveHandler","mouseLeaveHandler","_this5","map","label","ref","Item","onMouseLeave","_React$Component3","shouldComponentUpdate","nextProps","_props2","propTypes","bool","isRequired","string","func"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _button = require('./box/button');\n\nvar _text_input = require('./input/text_input');\n\nvar _text_input2 = _interopRequireDefault(_text_input);\n\nvar _media_utils = require('../utils/media_utils');\n\nvar _string_utils = require('../utils/string_utils');\n\nvar su = _interopRequireWildcard(_string_utils);\n\nvar _index = require('../core/index');\n\nvar l = _interopRequireWildcard(_index);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar cycle = function cycle(xs, x) {\n  return xs.skipWhile(function (y) {\n    return y !== x;\n  }).get(1, xs.get(0));\n};\n\nvar FiltrableList = function (_React$Component) {\n  _inherits(FiltrableList, _React$Component);\n\n  function FiltrableList(props) {\n    _classCallCheck(this, FiltrableList);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _this.state = { filteredItems: props.items, highlighted: props.defaultItem };\n    return _this;\n  }\n\n  FiltrableList.prototype.filter = function filter(str) {\n    var filteredItems = this.props.items.filter(function (x) {\n      return su.matches(str, x.get('label'));\n    });\n\n    var highlighted = filteredItems.size === 1 && filteredItems.get(0) || filteredItems.includes(this.state.highlighted) && this.state.highlighted || null;\n\n    return {\n      filteredItems: filteredItems,\n      highlighted: highlighted\n    };\n  };\n\n  FiltrableList.prototype.select = function select(x) {\n    this.props.onSelect(x);\n  };\n\n  FiltrableList.prototype.handleChange = function handleChange(e) {\n    this.setState(this.filter(e.target.value));\n  };\n\n  FiltrableList.prototype.handleKeyDown = function handleKeyDown(e) {\n    var _state = this.state,\n        filteredItems = _state.filteredItems,\n        highlighted = _state.highlighted;\n\n\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        this.setState({ highlighted: cycle(filteredItems, highlighted) });\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        this.setState({ highlighted: cycle(filteredItems.reverse(), highlighted) });\n        break;\n      case 'Enter':\n        e.preventDefault();\n        highlighted && this.select(highlighted);\n        break;\n      case 'Escape':\n        e.preventDefault();\n        this.props.onCancel();\n      default:\n      // no-op\n    }\n  };\n\n  FiltrableList.prototype.render = function render() {\n    var _this2 = this;\n\n    var _props = this.props,\n        icon = _props.icon,\n        iconUrl = _props.iconUrl,\n        onCancel = _props.onCancel,\n        model = _props.model;\n\n    return _react2.default.createElement(\n      'div',\n      { className: 'auth0-lock-select-country' },\n      _react2.default.createElement(\n        'div',\n        { className: 'auth0-lock-search' },\n        _react2.default.createElement(_button.BackButton, { lockId: l.id(model), onClick: onCancel }),\n        _react2.default.createElement(_text_input2.default, {\n          lockId: l.id(model),\n          name: 'search',\n          icon: icon,\n          iconUrl: iconUrl,\n          isValid: true,\n          onChange: this.handleChange.bind(this),\n          onKeyDown: this.handleKeyDown.bind(this)\n        })\n      ),\n      _react2.default.createElement(List, {\n        highlighted: this.state.highlighted,\n        items: this.state.filteredItems,\n        onClick: this.select.bind(this),\n        onMouseMove: function onMouseMove(x) {\n          return _this2.setState({ highlighted: x });\n        }\n      })\n    );\n  };\n\n  return FiltrableList;\n}(_react2.default.Component);\n\nexports.default = FiltrableList;\n\nvar List = function (_React$Component2) {\n  _inherits(List, _React$Component2);\n\n  function List() {\n    _classCallCheck(this, List);\n\n    return _possibleConstructorReturn(this, _React$Component2.apply(this, arguments));\n  }\n\n  List.prototype.componentDidUpdate = function componentDidUpdate() {\n    var _this4 = this;\n\n    // Ensure that highlighted item is entirely visible\n\n    // NOTE: I've spent very little time on this. It works, but it\n    // surely can be more clearly.\n\n    var highlighted = this.refs.highlighted;\n\n\n    if (highlighted) {\n      var scrollableNode = _reactDom2.default.findDOMNode(this);\n      var highlightedNode = _reactDom2.default.findDOMNode(highlighted);\n      var relativeOffsetTop = highlightedNode.offsetTop - scrollableNode.scrollTop;\n      var scrollTopDelta = 0;\n      if (relativeOffsetTop + highlightedNode.offsetHeight > scrollableNode.clientHeight) {\n        scrollTopDelta = relativeOffsetTop + highlightedNode.offsetHeight - scrollableNode.clientHeight;\n      } else if (relativeOffsetTop < 0) {\n        scrollTopDelta = relativeOffsetTop;\n      }\n\n      if (scrollTopDelta) {\n        this.preventHighlight = true;\n        scrollableNode.scrollTop += scrollTopDelta;\n        if (this.timeout) clearTimeout(this.timeout);\n        this.timeout = setTimeout(function () {\n          return _this4.preventHighlight = false;\n        }, 100);\n      }\n    }\n  };\n\n  List.prototype.mouseMoveHandler = function mouseMoveHandler(x) {\n    // TODO: This is an ugly hack to avoid highlighting the element under the\n    // mouse when an arrow key trigger a scroll of the list (which in turn\n    // triggers a mousemove event).\n    !this.preventHighlight && this.props.onMouseMove(x);\n  };\n\n  List.prototype.mouseLeaveHandler = function mouseLeaveHandler() {\n    // TODO: clear highlighted?\n  };\n\n  List.prototype.render = function render() {\n    var _this5 = this;\n\n    var items = this.props.items.map(function (x) {\n      var highlighted = x === _this5.props.highlighted;\n\n      var props = {\n        highlighted: highlighted,\n        label: x.get('label'),\n        onClick: function onClick() {\n          return _this5.props.onClick(x);\n        },\n        onMouseMove: function onMouseMove() {\n          return _this5.mouseMoveHandler(x);\n        }\n      };\n\n      if (highlighted) props.ref = 'highlighted';\n\n      return _react2.default.createElement(Item, _extends({ key: x.get('label') }, props));\n    });\n\n    return _react2.default.createElement(\n      'div',\n      { className: 'auth0-lock-list-code', onMouseLeave: this.mouseLeaveHandler.bind(this) },\n      _react2.default.createElement(\n        'ul',\n        null,\n        items\n      )\n    );\n  };\n\n  return List;\n}(_react2.default.Component);\n\nvar Item = function (_React$Component3) {\n  _inherits(Item, _React$Component3);\n\n  function Item() {\n    _classCallCheck(this, Item);\n\n    return _possibleConstructorReturn(this, _React$Component3.apply(this, arguments));\n  }\n\n  Item.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n    return this.props.highlighted != nextProps.highlighted;\n  };\n\n  Item.prototype.render = function render() {\n    var _props2 = this.props,\n        highlighted = _props2.highlighted,\n        label = _props2.label,\n        onClick = _props2.onClick,\n        onMouseMove = _props2.onMouseMove;\n\n    var className = highlighted ? 'auth0-lock-list-code-highlighted' : '';\n\n    return _react2.default.createElement(\n      'li',\n      { className: className, onClick: onClick, onMouseMove: onMouseMove },\n      label\n    );\n  };\n\n  return Item;\n}(_react2.default.Component);\n\nItem.propTypes = {\n  highlighted: _propTypes2.default.bool.isRequired,\n  label: _propTypes2.default.string.isRequired,\n  onClick: _propTypes2.default.func.isRequired,\n  onMouseMove: _propTypes2.default.func.isRequired\n};\n"]},"metadata":{},"sourceType":"script"}